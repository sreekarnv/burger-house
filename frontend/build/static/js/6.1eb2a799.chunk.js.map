{"version":3,"sources":["app/Dashboard/Admin/ManageUserOrders.js","app/store/actions/userActions.js","app/shared/components/BaseListItem/BaseListItem.js","app/store/actions/adminActions.js","app/Dashboard/components/OrderListItem/OrderListItem.js"],"names":["ManageUserOrders","dispatch","useDispatch","route","useRouteMatch","useState","filter","setFilter","orders","useSelector","state","admin","allOrders","orderStats","orderStatsInit","ordersInit","allOrdersInit","totalOrders","setTotalOrders","user","auth","history","useHistory","useEffect","role","replace","filterObj","status","adminActions","total","delivered","length","pending","cancelled","fullScreen","className","value","onChange","e","target","map","order","onClick","push","path","_id","reverse","updateUserData","data","a","type","actionTypes","axios","method","url","res","loginUserSuccess","error","response","getUserOrders","getUserOrder","id","updateUserOrderInit","updateUserOrderSuccess","updateUserOrderFailed","updateUserOrder","BaseListItem","props","children","getAllOrdersAdmin","params","getAllOrdersStatsAdmin","updateOrderStatusAdmin","getAllUsersFailed","getAllUsers","users","updateUserRole","deleteUser","MONTHS","OrderListItem","Date","createdAt","getDate","getMonth","getFullYear","price"],"mappings":"6MAsIeA,UA5HU,WACxB,IAAMC,EAAWC,cACXC,EAAQC,cAFgB,EAGFC,qBAHE,mBAGvBC,EAHuB,KAGfC,EAHe,KAIxBC,EAASC,aAAY,SAACC,GAAD,OAAWA,EAAMC,MAAMC,aAC5CC,EAAaJ,aAAY,SAACC,GAAD,OAAWA,EAAMC,MAAME,cAChDC,EAAiBL,aAAY,SAACC,GAAD,OAAWA,EAAMC,MAAMG,kBACpDC,EAAaN,aAAY,SAACC,GAAD,OAAWA,EAAMC,MAAMK,iBAPxB,EAQQX,mBAAS,kBARjB,mBAQvBY,EARuB,KAQVC,EARU,KAUxBC,EAAOV,aAAY,SAACC,GAAD,OAAWA,EAAMU,KAAKD,QACzCE,EAAUC,cA2BhB,OAzBAC,qBAAU,WACT,GAAIJ,GAAsB,UAAdA,EAAKK,KAChB,OAAOH,EAAQI,QAAQ,gBAEtB,CAACJ,EAASF,IAEbI,qBAAU,WACT,IAAIG,EACApB,IACHoB,EAAY,CAAEC,OAAQrB,IAEvBL,EAAS2B,IAA+BF,IACxCzB,EAAS2B,SACP,CAAC3B,EAAUK,IAEdiB,qBAAU,WACT,GAAIV,EAAY,CACf,IAAIgB,EAAQ,EACRhB,EAAWiB,UAAUC,SAAQF,GAAShB,EAAWiB,UAAU,GAAGD,OAC9DhB,EAAWmB,QAAQD,SAAQF,GAAShB,EAAWmB,QAAQ,GAAGH,OAC1DhB,EAAWoB,UAAUF,SAAQF,GAAShB,EAAWoB,UAAU,GAAGJ,OAClEX,EAAeW,MAEd,CAAChB,IAEAE,GAAcD,EACV,cAAC,IAAD,CAAQoB,YAAU,IAIzB,sBAAKC,UAAU,oBAAf,UACC,oBAAIA,UAAU,2BAAd,2BAEA,sBAAKA,UAAU,2BAAf,UACC,qBAAKA,UAAU,oBAAf,SACC,sBAAKA,UAAU,aAAf,UACC,oBAAIA,UAAU,kBAAd,mBACA,6CAIF,qBAAKA,UAAU,oBAAf,SACC,sBAAKA,UAAU,aAAf,UACC,8CACA,4BAAIlB,SAIN,qBAAKkB,UAAU,oBAAf,SACC,sBAAKA,UAAU,aAAf,UACC,oBAAIA,UAAU,iBAAd,8BACA,4BACEtB,GAAcA,EAAWiB,UAAUC,OACjClB,EAAWiB,UAAU,GAAGD,MACxB,SAKN,qBAAKM,UAAU,oBAAf,SACC,sBAAKA,UAAU,aAAf,UACC,oBAAIA,UAAU,cAAd,8BACA,4BACEtB,GAAcA,EAAWoB,UAAUF,OACjClB,EAAWoB,UAAU,GAAGJ,MACxB,SAKN,qBAAKM,UAAU,oBAAf,SACC,sBAAKA,UAAU,aAAf,UACC,oBAAIA,UAAU,gBAAd,4BACA,4BACEtB,GAAcA,EAAWmB,QAAQD,OAC/BlB,EAAWmB,QAAQ,GAAGH,MACtB,YAMP,qBAAKM,UAAU,wCAAf,SACC,yBACCC,MAAO9B,EACP+B,SAAU,SAACC,GAAD,OAAO/B,EAAU+B,EAAEC,OAAOH,QACpCD,UAAU,cAHX,UAIC,wBAAQC,MAAM,GAAd,iBACA,wBAAQA,MAAM,UAAd,qBACA,wBAAQA,MAAM,YAAd,uBACA,wBAAQA,MAAM,YAAd,4BAIF,oBAAID,UAAU,0BAAd,SACE3B,EACCgC,KAAI,SAACC,GACL,OACC,cAAC,IAAD,CACCC,QAAS,kBAAMrB,EAAQsB,KAAR,UAAgBxC,EAAMyC,KAAtB,YAA8BH,EAAMI,OAEnDJ,MAAOA,GADFA,EAAMI,QAKbC,iB,0UCtGOC,EAAiB,SAACC,GAC9B,8CAAO,WAAO/C,GAAP,eAAAgD,EAAA,6DACNhD,EApBM,CACNiD,KAAMC,OAkBA,kBAGaC,IAAM,CACvBC,OAAQ,QACRC,IAAK,mBACLN,SANI,OAGCO,EAHD,OASLtD,EAtBK,CACNiD,KAAMC,OAsBLlD,EAASuD,YAAiBD,EAAIP,KAAKA,OAV9B,gDAYL/C,GApBkCwD,EAoBJ,KAAIC,SAASV,KAnBtC,CACNE,KAAMC,KACNM,WAKM,kCAR4B,IAACA,IAQ7B,oBAAP,uDAuCYE,EAAgB,WAC5B,8CAAO,WAAO1D,GAAP,eAAAgD,EAAA,6DACNhD,EArBM,CACNiD,KAAMC,MAmBA,kBAGaC,IAAM,CACvBC,OAAQ,MACRC,IAAK,4BALD,OAGCC,EAHD,OAQLtD,GAvBkCO,EAuBJ+C,EAAIP,KAAKA,KAtBlC,CACNE,KAAMC,IACN3C,YAYM,gDAULP,GAlBiCwD,EAkBJ,KAAIC,SAASV,KAjBrC,CACNE,KAAMC,IACNM,WAKM,kCAR2B,IAACA,EAPCjD,IAe7B,oBAAP,uDAqCYoD,EAAe,SAACC,GAC5B,8CAAO,WAAO5D,GAAP,eAAAgD,EAAA,6DACNhD,EArBM,CACNiD,KAAMC,MAmBA,kBAGaC,IAAM,CACvBC,OAAQ,MACRC,IAAI,2BAAD,OAA6BO,KAL5B,OAGCN,EAHD,OAQLtD,GAvBiCwC,EAuBJc,EAAIP,KAAKA,KAtBjC,CACNE,KAAMC,IACNV,WAYM,gDAULxC,GAlBgCwD,EAkBJ,KAAIC,SAASV,KAjBpC,CACNE,KAAMC,IACNM,WAKM,kCAR0B,IAACA,EAPChB,IAe5B,oBAAP,uDAkBYqB,EAAsB,WAClC,MAAO,CACNZ,KAAMC,OAIKY,EAAyB,SAACtB,GACtC,MAAO,CACNS,KAAMC,KACNV,UAIWuB,EAAwB,SAACP,GACrC,MAAO,CACNP,KAAMC,KACNM,UAIWQ,EAAkB,SAACJ,EAAIlC,GACnC,8CAAO,WAAO1B,GAAP,eAAAgD,EAAA,6DACNhD,EAAS6D,KADH,kBAGaV,IAAM,CACvBC,OAAQ,QACRC,IAAI,2BAAD,OAA6BO,GAChCb,KAAM,CACLrB,OAAQA,GAAU,eAPf,OAGC4B,EAHD,OAWLtD,EAAS8D,EAAuBR,EAAIP,KAAKA,OAXpC,gDAaL/C,EAAS+D,EAAsB,KAAIN,SAASV,OAbvC,yDAAP,wD,gDCpIckB,IAVM,SAACC,GACrB,OACC,qBACCzB,QAASyB,EAAMzB,QACfP,UAAS,yBAAoBgC,EAAMhC,WAFpC,SAGEgC,EAAMC,a,+SCwBGC,EAAoB,SAAC/D,GACjC,8CAAO,WAAOL,GAAP,eAAAgD,EAAA,6DACNhD,EArBM,CACNiD,KAAMC,MAmBA,kBAGaC,IAAM,CACvBC,OAAQ,MACRC,IAAK,uBACLgB,OAAO,eACHhE,KAPA,OAGCiD,EAHD,OAWLtD,GA1BsCO,EA0BJ+C,EAAIP,KAAKA,KAzBtC,CACNE,KAAMC,IACN3C,YAYM,gDAaLP,GArBqCwD,EAqBJ,KAAIC,SAASV,KApBzC,CACNE,KAAMC,IACNM,WAKM,kCAR+B,IAACA,EAPCjD,IAejC,oBAAP,uDAwCY+D,EAAyB,SAACjE,GACtC,8CAAO,WAAOL,GAAP,eAAAgD,EAAA,6DACNhD,EArBM,CACNiD,KAAMC,MAmBA,kBAGaC,IAAM,CACvBC,OAAQ,MACRC,IAAK,oCALD,OAGCC,EAHD,OAQLtD,GAvB2CY,EAuBJ0C,EAAIP,KAAKnC,WAtB3C,CACNqC,KAAMC,IACNtC,gBAYM,gDAULZ,GAlB0CwD,EAkBJ,KAAIC,SAASV,KAjB9C,CACNE,KAAMC,IACNM,WAKM,kCARoC,IAACA,EAPC5C,IAetC,oBAAP,uDAkBY2D,EAAyB,SAACX,EAAIb,GAC1C,8CAAO,WAAO/C,GAAP,eAAAgD,EAAA,6DACNhD,EAAS6D,eADH,kBAGaV,IAAM,CACvBC,OAAQ,QACRC,IAAI,wBAAD,OAA0BO,GAC7Bb,SANI,OAGCO,EAHD,OASLtD,EAAS8D,YAAuBR,EAAIP,KAAKA,OATpC,gDAWL/C,EAAS+D,YAAsB,KAAIN,SAASV,OAXvC,yDAAP,uDAgCYyB,EAAoB,SAAChB,GACjC,MAAO,CACNP,KAAMC,IACNM,UAIWiB,EAAc,WAC1B,8CAAO,WAAOzE,GAAP,eAAAgD,EAAA,6DACNhD,EArBM,CACNiD,KAAMC,MAmBA,kBAGaC,IAAM,CACvBC,OAAQ,MACRC,IAAK,kBALD,OAGCC,EAHD,OAQLtD,GAvBgC0E,EAuBJpB,EAAIP,KAAKA,KAtBhC,CACNE,KAAMC,IACNwB,WAYM,gDAUL1E,EAASwE,EAAkB,KAAIf,SAASV,OAVnC,kCAf0B,IAAC2B,IAe3B,oBAAP,uDAiBYC,EAAiB,SAACf,EAAIb,GAClC,8CAAO,WAAO/C,GAAP,SAAAgD,EAAA,+EAECG,IAAM,CACXC,OAAQ,QACRC,IAAI,iBAAD,OAAmBO,GACtBb,SALI,sDAQL/C,EAASwE,EAAkB,KAAIf,SAASV,OARnC,wDAAP,uDAeY6B,EAAa,SAAChB,GAC1B,8CAAO,WAAO5D,GAAP,SAAAgD,EAAA,+EAECG,IAAM,CACXC,OAAQ,SACRC,IAAI,iBAAD,OAAmBO,KAJlB,sDAOL5D,EAASwE,EAAkB,KAAIf,SAASV,OAPnC,wDAAP,wD,0DCnKK8B,EAAS,CACd,MACA,MACA,QACA,QACA,MACA,OACA,OACA,OACA,OACA,MACA,MACA,OAuBcC,IApBO,SAACZ,GAAW,IACzB1B,EAAmB0B,EAAnB1B,MAAOC,EAAYyB,EAAZzB,QAEf,OACC,eAAC,IAAD,CAAcP,UAAU,kBAAkBO,QAASA,EAAnD,UACC,sBAAKP,UAAU,wBAAf,UACC,+BAAO,IAAI6C,KAAKvC,EAAMwC,WAAWC,YADlC,OAEC,+BAAOJ,EAAO,IAAIE,KAAKvC,EAAMwC,WAAWE,cAFzC,OAGC,+BAAO,IAAIH,KAAKvC,EAAMwC,WAAWG,mBAElC,oBAAGjD,UAAU,sBAAb,cAAqCM,EAAMI,OAC3C,qBAAIV,UAAU,yBAAd,gBAA2CM,EAAM4C,SACjD,mBACClD,UAAS,2DAAsDM,EAAMd,QADtE,SAEEc,EAAMd","file":"static/js/6.1eb2a799.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport OrderListItem from \"../components/OrderListItem/OrderListItem\";\r\nimport Loader from \"./../../shared/components/Loader/Loader\";\r\n\r\nimport * as adminActions from \"./../../store/actions/adminActions\";\r\n\r\nimport { useHistory, useRouteMatch } from \"react-router-dom\";\r\n\r\nconst ManageUserOrders = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst route = useRouteMatch();\r\n\tconst [filter, setFilter] = useState();\r\n\tconst orders = useSelector((state) => state.admin.allOrders);\r\n\tconst orderStats = useSelector((state) => state.admin.orderStats);\r\n\tconst orderStatsInit = useSelector((state) => state.admin.orderStatsInit);\r\n\tconst ordersInit = useSelector((state) => state.admin.allOrdersInit);\r\n\tconst [totalOrders, setTotalOrders] = useState(\"calculating...\");\r\n\r\n\tconst user = useSelector((state) => state.auth.user);\r\n\tconst history = useHistory();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (user && user.role !== \"admin\") {\r\n\t\t\treturn history.replace(\"/dashboard\");\r\n\t\t}\r\n\t}, [history, user]);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet filterObj;\r\n\t\tif (filter) {\r\n\t\t\tfilterObj = { status: filter };\r\n\t\t}\r\n\t\tdispatch(adminActions.getAllOrdersAdmin(filterObj));\r\n\t\tdispatch(adminActions.getAllOrdersStatsAdmin());\r\n\t}, [dispatch, filter]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (orderStats) {\r\n\t\t\tlet total = 0;\r\n\t\t\tif (orderStats.delivered.length) total += orderStats.delivered[0].total;\r\n\t\t\tif (orderStats.pending.length) total += orderStats.pending[0].total;\r\n\t\t\tif (orderStats.cancelled.length) total += orderStats.cancelled[0].total;\r\n\t\t\tsetTotalOrders(total);\r\n\t\t}\r\n\t}, [orderStats]);\r\n\r\n\tif (ordersInit || orderStatsInit) {\r\n\t\treturn <Loader fullScreen />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='admin-user-orders'>\r\n\t\t\t<h3 className='heading-1 u-text-primary'>Manage Orders</h3>\r\n\r\n\t\t\t<div className='admin-user-orders__stats'>\r\n\t\t\t\t<div className='user-orders-stats'>\r\n\t\t\t\t\t<div className='card-stats'>\r\n\t\t\t\t\t\t<h3 className='u-text-tertiary'>Total</h3>\r\n\t\t\t\t\t\t<p>Rs 1250</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='user-orders-stats'>\r\n\t\t\t\t\t<div className='card-stats'>\r\n\t\t\t\t\t\t<h3>Total Orders</h3>\r\n\t\t\t\t\t\t<p>{totalOrders}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='user-orders-stats'>\r\n\t\t\t\t\t<div className='card-stats'>\r\n\t\t\t\t\t\t<h3 className='u-text-success'>Delivered Orders</h3>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t{orderStats && orderStats.delivered.length\r\n\t\t\t\t\t\t\t\t? orderStats.delivered[0].total\r\n\t\t\t\t\t\t\t\t: 0}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='user-orders-stats'>\r\n\t\t\t\t\t<div className='card-stats'>\r\n\t\t\t\t\t\t<h3 className='u-text-dark'>Cancelled Orders</h3>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t{orderStats && orderStats.cancelled.length\r\n\t\t\t\t\t\t\t\t? orderStats.cancelled[0].total\r\n\t\t\t\t\t\t\t\t: 0}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='user-orders-stats'>\r\n\t\t\t\t\t<div className='card-stats'>\r\n\t\t\t\t\t\t<h3 className='u-text-danger'>Pending Orders</h3>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t{orderStats && orderStats.pending.length\r\n\t\t\t\t\t\t\t\t? orderStats.pending[0].total\r\n\t\t\t\t\t\t\t\t: 0}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='form__group admin-user-orders__filter'>\r\n\t\t\t\t<select\r\n\t\t\t\t\tvalue={filter}\r\n\t\t\t\t\tonChange={(e) => setFilter(e.target.value)}\r\n\t\t\t\t\tclassName='form__input'>\r\n\t\t\t\t\t<option value=''>---</option>\r\n\t\t\t\t\t<option value='pending'>Pending</option>\r\n\t\t\t\t\t<option value='delivered'>Delivered</option>\r\n\t\t\t\t\t<option value='cancelled'>Cancelled</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\r\n\t\t\t<ul className='admin-user-orders__list'>\r\n\t\t\t\t{orders\r\n\t\t\t\t\t.map((order) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<OrderListItem\r\n\t\t\t\t\t\t\t\tonClick={() => history.push(`${route.path}/${order._id}`)}\r\n\t\t\t\t\t\t\t\tkey={order._id}\r\n\t\t\t\t\t\t\t\torder={order}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.reverse()}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ManageUserOrders;\r\n","import axios from \"axios\";\r\n\r\nimport { loginUserSuccess } from \"./authActions\";\r\nimport * as actionTypes from \"./../actionTypes\";\r\n\r\n//////////////////////////////////////////////////////////////\r\n\r\nexport const updateUserDataInit = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.UPDATE_USER_DATA_INIT,\r\n\t};\r\n};\r\n\r\nexport const updateUserDataSuccess = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.UPDATE_USER_DATA_SUCCESS,\r\n\t};\r\n};\r\n\r\nexport const updateUserDataFailed = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.UPDATE_USER_DATA_FAILED,\r\n\t\terror,\r\n\t};\r\n};\r\n\r\nexport const updateUserData = (data) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(updateUserDataInit());\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\turl: \"/api/v2/users/me\",\r\n\t\t\t\tdata,\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(updateUserDataSuccess());\r\n\t\t\tdispatch(loginUserSuccess(res.data.data));\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(updateUserDataFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\n/////////////////////////////////////////////////////////////////////\r\n\r\nexport const getUserOrdersInit = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_USER_ORDERS_INIT,\r\n\t};\r\n};\r\n\r\nexport const getUserOrdersSuccess = (orders) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_USER_ORDERS_SUCCESS,\r\n\t\torders,\r\n\t};\r\n};\r\n\r\nexport const getUserOrdersFailed = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_USER_ORDERS_FAILED,\r\n\t\terror,\r\n\t};\r\n};\r\n\r\nexport const getUserOrders = () => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(getUserOrdersInit());\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turl: \"/api/v2/users/me/orders\",\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(getUserOrdersSuccess(res.data.data));\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(getUserOrdersFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\n///////////////////////////////////////////////////////\r\n\r\nexport const getUserOrderInit = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_USER_ORDER_INIT,\r\n\t};\r\n};\r\n\r\nexport const getUserOrderSuccess = (order) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_USER_ORDER_SUCCESS,\r\n\t\torder,\r\n\t};\r\n};\r\n\r\nexport const getUserOrderFailed = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_USER_ORDER_FAILED,\r\n\t\terror,\r\n\t};\r\n};\r\n\r\nexport const getUserOrder = (id) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(getUserOrderInit());\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turl: `/api/v2/users/me/orders/${id}`,\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(getUserOrderSuccess(res.data.data));\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(getUserOrderFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\n/////////////////////////////////////////////////////////////\r\n// Cancel User Order (UPDATE)\r\n\r\nexport const updateUserOrderInit = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.UPDATE_USER_ORDER_INIT,\r\n\t};\r\n};\r\n\r\nexport const updateUserOrderSuccess = (order) => {\r\n\treturn {\r\n\t\ttype: actionTypes.UPDATE_USER_ORDER_SUCCESS,\r\n\t\torder,\r\n\t};\r\n};\r\n\r\nexport const updateUserOrderFailed = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.UPDATE_USER_ORDER_FAILED,\r\n\t\terror,\r\n\t};\r\n};\r\n\r\nexport const updateUserOrder = (id, status) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(updateUserOrderInit());\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\turl: `/api/v2/users/me/orders/${id}`,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tstatus: status || \"cancelled\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(updateUserOrderSuccess(res.data.data));\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(updateUserOrderFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n","import React from \"react\";\r\n\r\nconst BaseListItem = (props) => {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tonClick={props.onClick}\r\n\t\t\tclassName={`base-list-item ${props.className}`}>\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default BaseListItem;\r\n","import * as actionTypes from \"./../actionTypes\";\r\n\r\nimport {\r\n\tupdateUserOrderInit,\r\n\tupdateUserOrderSuccess,\r\n\tupdateUserOrderFailed,\r\n} from \"./userActions\";\r\n\r\nimport axios from \"axios\";\r\n\r\n// Get All Orders\r\nexport const getAllOrdersAdminInit = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_ORDERS_ADMIN_INIT,\r\n\t};\r\n};\r\n\r\nexport const getAllOrdersAdminSuccess = (orders) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_ORDERS_ADMIN_SUCCESS,\r\n\t\torders,\r\n\t};\r\n};\r\n\r\nexport const getAllOrdersAdminFailed = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_ORDERS_ADMIN_FAILED,\r\n\t\terror,\r\n\t};\r\n};\r\n\r\nexport const getAllOrdersAdmin = (filter) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(getAllOrdersAdminInit());\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turl: \"/api/v2/orders/admin\",\r\n\t\t\t\tparams: {\r\n\t\t\t\t\t...filter,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(getAllOrdersAdminSuccess(res.data.data));\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(getAllOrdersAdminFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\n// All Orders Stats\r\n\r\nexport const getAllOrdersAdminStatsInit = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_ORDERS_ADMIN_STATS_INIT,\r\n\t};\r\n};\r\n\r\nexport const getAllOrdersAdminStatsSuccess = (orderStats) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_ORDERS_ADMIN_STATS_SUCCESS,\r\n\t\torderStats,\r\n\t};\r\n};\r\n\r\nexport const getAllOrdersAdminStatsFailed = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_ORDERS_ADMIN_STATS_FAILED,\r\n\t\terror,\r\n\t};\r\n};\r\n\r\nexport const getAllOrdersStatsAdmin = (filter) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(getAllOrdersAdminStatsInit());\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turl: \"/api/v2/orders/admin/orderStats\",\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(getAllOrdersAdminStatsSuccess(res.data.orderStats));\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(getAllOrdersAdminStatsFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\n/////////////////////////////////////////////////////\r\n// Update Order status\r\n\r\nexport const updateOrderStatusAdmin = (id, data) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(updateUserOrderInit());\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\turl: `/api/v2/orders/admin/${id}`,\r\n\t\t\t\tdata,\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(updateUserOrderSuccess(res.data.data));\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(updateUserOrderFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\n/////////////////////////////////////////////////////////////\r\n// Get All Users\r\n\r\nexport const getAllUsersInit = () => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_USERS_INIT,\r\n\t};\r\n};\r\n\r\nexport const getAllUsersSuccess = (users) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_USERS_SUCCESS,\r\n\t\tusers,\r\n\t};\r\n};\r\n\r\nexport const getAllUsersFailed = (error) => {\r\n\treturn {\r\n\t\ttype: actionTypes.GET_ALL_USERS_FAILED,\r\n\t\terror,\r\n\t};\r\n};\r\n\r\nexport const getAllUsers = () => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(getAllUsersInit());\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\turl: \"/api/v2/users\",\r\n\t\t\t});\r\n\r\n\t\t\tdispatch(getAllUsersSuccess(res.data.data));\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(getAllUsersFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\n// Update User Role to Admin\r\n\r\nexport const updateUserRole = (id, data) => {\r\n\treturn async (dispatch) => {\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\turl: `/api/v2/users/${id}`,\r\n\t\t\t\tdata,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(getAllUsersFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\n// Delete User\r\n\r\nexport const deleteUser = (id) => {\r\n\treturn async (dispatch) => {\r\n\t\ttry {\r\n\t\t\tawait axios({\r\n\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t\turl: `/api/v2/users/${id}`,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tdispatch(getAllUsersFailed(err.response.data));\r\n\t\t}\r\n\t};\r\n};\r\n","import React from \"react\";\r\nimport BaseListItem from \"./../../../shared/components/BaseListItem/BaseListItem\";\r\n\r\nconst MONTHS = [\r\n\t\"Jan\",\r\n\t\"Feb\",\r\n\t\"March\",\r\n\t\"April\",\r\n\t\"May\",\r\n\t\"June\",\r\n\t\"July\",\r\n\t\"Augu\",\r\n\t\"Sept\",\r\n\t\"Oct\",\r\n\t\"Nov\",\r\n\t\"Dec\",\r\n];\r\n\r\nconst OrderListItem = (props) => {\r\n\tconst { order, onClick } = props;\r\n\r\n\treturn (\r\n\t\t<BaseListItem className='order-list-item' onClick={onClick}>\r\n\t\t\t<div className='order-list-item__date'>\r\n\t\t\t\t<span>{new Date(order.createdAt).getDate()}</span>&nbsp;\r\n\t\t\t\t<span>{MONTHS[new Date(order.createdAt).getMonth()]}</span>&nbsp;\r\n\t\t\t\t<span>{new Date(order.createdAt).getFullYear()}</span>\r\n\t\t\t</div>\r\n\t\t\t<p className='order-list-item__id'>#{order._id}</p>\r\n\t\t\t<h3 className='order-list-item__price'>Rs {order.price}</h3>\r\n\t\t\t<p\r\n\t\t\t\tclassName={`order-list-item__status order-list-item__status--${order.status}`}>\r\n\t\t\t\t{order.status}\r\n\t\t\t</p>\r\n\t\t</BaseListItem>\r\n\t);\r\n};\r\n\r\nexport default OrderListItem;\r\n"],"sourceRoot":""}