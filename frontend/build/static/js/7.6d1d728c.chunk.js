(this["webpackJsonpburger-house-frontend"]=this["webpackJsonpburger-house-frontend"]||[]).push([[7],{134:function(e,t,r){"use strict";r.r(t);var n=r(23),a=r(1),c=r(0),s=r(5),u=r(94),i=r(18),d=r(87),o=r(7);t.default=function(){var e=Object(s.c)(),t=Object(o.i)(),r=Object(c.useState)(),l=Object(n.a)(r,2),p=l[0],f=l[1],j=Object(s.d)((function(e){return e.admin.allOrders})),h=Object(s.d)((function(e){return e.admin.orderStats})),v=Object(s.d)((function(e){return e.admin.orderStatsInit})),b=Object(s.d)((function(e){return e.admin.allOrdersInit})),O=Object(c.useState)("calculating..."),m=Object(n.a)(O,2),x=m[0],y=m[1],g=Object(s.d)((function(e){return e.auth.user})),k=Object(o.g)();return Object(c.useEffect)((function(){if(g&&"admin"!==g.role)return k.replace("/dashboard")}),[k,g]),Object(c.useEffect)((function(){var t;p&&(t={status:p}),e(d.b(t)),e(d.c())}),[e,p]),Object(c.useEffect)((function(){if(h){var e=0;h.delivered.length&&(e+=h.delivered[0].total),h.pending.length&&(e+=h.pending[0].total),h.cancelled.length&&(e+=h.cancelled[0].total),y(e)}}),[h]),b||v?Object(a.jsx)(i.a,{fullScreen:!0}):Object(a.jsxs)("div",{className:"admin-user-orders",children:[Object(a.jsx)("h3",{className:"heading-1 u-text-primary",children:"Manage Orders"}),Object(a.jsxs)("div",{className:"admin-user-orders__stats",children:[Object(a.jsx)("div",{className:"user-orders-stats",children:Object(a.jsxs)("div",{className:"card-stats",children:[Object(a.jsx)("h3",{className:"u-text-tertiary",children:"Total"}),Object(a.jsx)("p",{children:"Rs 1250"})]})}),Object(a.jsx)("div",{className:"user-orders-stats",children:Object(a.jsxs)("div",{className:"card-stats",children:[Object(a.jsx)("h3",{children:"Total Orders"}),Object(a.jsx)("p",{children:x})]})}),Object(a.jsx)("div",{className:"user-orders-stats",children:Object(a.jsxs)("div",{className:"card-stats",children:[Object(a.jsx)("h3",{className:"u-text-success",children:"Delivered Orders"}),Object(a.jsx)("p",{children:h&&h.delivered.length?h.delivered[0].total:0})]})}),Object(a.jsx)("div",{className:"user-orders-stats",children:Object(a.jsxs)("div",{className:"card-stats",children:[Object(a.jsx)("h3",{className:"u-text-dark",children:"Cancelled Orders"}),Object(a.jsx)("p",{children:h&&h.cancelled.length?h.cancelled[0].total:0})]})}),Object(a.jsx)("div",{className:"user-orders-stats",children:Object(a.jsxs)("div",{className:"card-stats",children:[Object(a.jsx)("h3",{className:"u-text-danger",children:"Pending Orders"}),Object(a.jsx)("p",{children:h&&h.pending.length?h.pending[0].total:0})]})})]}),Object(a.jsx)("div",{className:"form__group admin-user-orders__filter",children:Object(a.jsxs)("select",{value:p,onChange:function(e){return f(e.target.value)},className:"form__input",children:[Object(a.jsx)("option",{value:"",children:"---"}),Object(a.jsx)("option",{value:"pending",children:"Pending"}),Object(a.jsx)("option",{value:"delivered",children:"Delivered"}),Object(a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),Object(a.jsx)("ul",{className:"admin-user-orders__list",children:j.map((function(e){return Object(a.jsx)(u.a,{onClick:function(){return k.push("".concat(t.path,"/").concat(e._id))},order:e},e._id)})).reverse()})]})}},82:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"g",(function(){return j})),r.d(t,"e",(function(){return h})),r.d(t,"d",(function(){return v}));var n=r(6),a=r.n(n),c=r(10),s=r(15),u=r.n(s),i=r(35),d=r(3),o=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:d.cb}),t.prev=1,t.next=4,u()({method:"PATCH",url:"/api/v2/users/me",data:e});case 4:n=t.sent,r({type:d.db}),r(Object(i.c)(n.data.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r((a=t.t0.response.data,{type:d.bb,error:a}));case 12:case"end":return t.stop()}var a}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},l=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:d.z}),e.prev=1,e.next=4,u()({method:"GET",url:"/api/v2/users/me/orders"});case 4:r=e.sent,t((a=r.data.data,{type:d.A,orders:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0.response.data,{type:d.y,error:n}));case 11:case"end":return e.stop()}var n,a}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:d.C}),t.prev=1,t.next=4,u()({method:"GET",url:"/api/v2/users/me/orders/".concat(e)});case 4:n=t.sent,r((c=n.data.data,{type:d.D,order:c})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r((a=t.t0.response.data,{type:d.B,error:a}));case 11:case"end":return t.stop()}var a,c}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},f=function(){return{type:d.fb}},j=function(e){return{type:d.gb,order:e}},h=function(e){return{type:d.eb,error:e}},v=function(e,t){return function(){var r=Object(c.a)(a.a.mark((function r(n){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(f()),r.prev=1,r.next=4,u()({method:"PATCH",url:"/api/v2/users/me/orders/".concat(e),data:{status:t||"cancelled"}});case 4:c=r.sent,n(j(c.data.data)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n(h(r.t0.response.data));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}},83:function(e,t,r){"use strict";var n=r(1);r(0);t.a=function(e){return Object(n.jsx)("div",{onClick:e.onClick,className:"base-list-item ".concat(e.className),children:e.children})}},87:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"d",(function(){return h})),r.d(t,"f",(function(){return v})),r.d(t,"a",(function(){return b}));var n=r(6),a=r.n(n),c=r(2),s=r(10),u=r(3),i=r(82),d=r(15),o=r.n(d),l=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.k}),t.prev=1,t.next=4,o()({method:"GET",url:"/api/v2/orders/admin",params:Object(c.a)({},e)});case 4:n=t.sent,r((s=n.data.data,{type:u.o,orders:s})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r((a=t.t0.response.data,{type:u.j,error:a}));case 11:case"end":return t.stop()}var a,s}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.m}),e.prev=1,e.next=4,o()({method:"GET",url:"/api/v2/orders/admin/orderStats"});case 4:r=e.sent,t((a=r.data.orderStats,{type:u.n,orderStats:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0.response.data,{type:u.l,error:n}));case 11:case"end":return e.stop()}var n,a}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e,t){return function(){var r=Object(s.a)(a.a.mark((function r(n){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Object(i.f)()),r.prev=1,r.next=4,o()({method:"PATCH",url:"/api/v2/orders/admin/".concat(e),data:t});case 4:c=r.sent,n(Object(i.g)(c.data.data)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n(Object(i.e)(r.t0.response.data));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},j=function(e){return{type:u.p,error:e}},h=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.q}),e.prev=1,e.next=4,o()({method:"GET",url:"/api/v2/users"});case 4:r=e.sent,t((n=r.data.data,{type:u.r,users:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(j(e.t0.response.data));case 11:case"end":return e.stop()}var n}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},v=function(e,t){return function(){var r=Object(s.a)(a.a.mark((function r(n){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o()({method:"PATCH",url:"/api/v2/users/".concat(e),data:t});case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),n(j(r.t0.response.data));case 8:case"end":return r.stop()}}),r,null,[[0,5]])})));return function(e){return r.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o()({method:"DELETE",url:"/api/v2/users/".concat(e)});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),r(j(t.t0.response.data));case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}},94:function(e,t,r){"use strict";var n=r(1),a=(r(0),r(83)),c=["Jan","Feb","March","April","May","June","July","Augu","Sept","Oct","Nov","Dec"];t.a=function(e){var t=e.order,r=e.onClick;return Object(n.jsxs)(a.a,{className:"order-list-item",onClick:r,children:[Object(n.jsxs)("div",{className:"order-list-item__date",children:[Object(n.jsx)("span",{children:new Date(t.createdAt).getDate()}),"\xa0",Object(n.jsx)("span",{children:c[new Date(t.createdAt).getMonth()]}),"\xa0",Object(n.jsx)("span",{children:new Date(t.createdAt).getFullYear()})]}),Object(n.jsxs)("p",{className:"order-list-item__id",children:["#",t._id]}),Object(n.jsxs)("h3",{className:"order-list-item__price",children:["Rs ",t.price]}),Object(n.jsx)("p",{className:"order-list-item__status order-list-item__status--".concat(t.status),children:t.status})]})}}}]);
//# sourceMappingURL=7.6d1d728c.chunk.js.map