{"version":3,"sources":["app/Dashboard/Admin/BurgerDetail.js","app/shared/components/Form/FormInput.js"],"names":["BurgerDetail","params","useParams","user","useSelector","state","auth","history","useHistory","useEffect","role","replace","useState","name","type","label","required","value","price","photo","preview","burgerInputstate","setBurgerInputState","burger","setBurger","loading","setIsLoading","burgerIngredients","setBurgerIngredients","a","axios","method","url","slug","res","data","photoUrl","ingredients","forEach","el","push","ingredient","amount","getBurger","fullScreen","updateBurger","e","preventDefault","body","FormData","append","updatedIngs","_id","updatedIngredients","JSON","stringify","className","onSubmit","Object","keys","map","formState","id","onFormStateChange","hideCta","FormInput","props","htmlFor","onChange","target","files","URL","createObjectURL","style","display","src","alt","placeholder"],"mappings":"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","file":"static/js/14.752f169f.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nimport FormInput from \"./../../shared/components/Form/FormInput\";\r\n\r\nimport axios from \"axios\";\r\nimport Loader from \"../../shared/components/Loader/Loader\";\r\n\r\nimport CustomBurger from \"./../../shared/components/CustomBurger/CustomBurger\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst BurgerDetail = () => {\r\n\tconst params = useParams();\r\n\tconst user = useSelector((state) => state.auth.user);\r\n\tconst history = useHistory();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (user && user.role !== \"admin\") {\r\n\t\t\treturn history.replace(\"/dashboard\");\r\n\t\t}\r\n\t}, [history, user]);\r\n\r\n\tconst [burgerInputstate, setBurgerInputState] = useState({\r\n\t\tname: {\r\n\t\t\ttype: \"text\",\r\n\t\t\tlabel: \"Name\",\r\n\t\t\trequired: true,\r\n\t\t\tvalue: \"\",\r\n\t\t},\r\n\t\tprice: {\r\n\t\t\ttype: \"text\",\r\n\t\t\tlabel: \"Price\",\r\n\t\t\trequired: true,\r\n\t\t\tvalue: \"\",\r\n\t\t},\r\n\t\tphoto: {\r\n\t\t\ttype: \"file\",\r\n\t\t\tlabel: \"photo\",\r\n\t\t\tvalue: \"\",\r\n\t\t\tpreview: \"\",\r\n\t\t},\r\n\t});\r\n\r\n\tconst [burger, setBurger] = useState();\r\n\tconst [loading, setIsLoading] = useState(false);\r\n\r\n\tconst [burgerIngredients, setBurgerIngredients] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!burger) {\r\n\t\t\tsetIsLoading(true);\r\n\t\t\tconst getBurger = async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await axios({\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\turl: `/api/v2/burgers/${params.slug}`,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tsetBurger(res.data.data);\r\n\t\t\t\t\tsetBurgerInputState({\r\n\t\t\t\t\t\tname: {\r\n\t\t\t\t\t\t\t...burgerInputstate.name,\r\n\t\t\t\t\t\t\tvalue: res.data.data.name,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tprice: {\r\n\t\t\t\t\t\t\t...burgerInputstate.price,\r\n\t\t\t\t\t\t\tvalue: res.data.data.price,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tphoto: {\r\n\t\t\t\t\t\t\t...burgerInputstate.photo,\r\n\t\t\t\t\t\t\tpreview: res.data.data.photoUrl,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tlet ingredients = [];\r\n\t\t\t\t\tres.data.data.ingredients.forEach((el) => {\r\n\t\t\t\t\t\tingredients.push({ ...el.ingredient, amount: el.amount });\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetBurgerIngredients(ingredients);\r\n\t\t\t\t} catch (err) {}\r\n\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t};\r\n\t\t\tgetBurger();\r\n\t\t}\r\n\t}, [params.slug, burger, burgerInputstate]);\r\n\r\n\tif (loading) {\r\n\t\treturn <Loader fullScreen />;\r\n\t}\r\n\r\n\tconst updateBurger = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet body = new FormData();\r\n\r\n\t\tif (burger.name !== burgerInputstate.name.value) {\r\n\t\t\tbody.append(\"name\", burgerInputstate.name.value);\r\n\t\t}\r\n\r\n\t\tif (burger.price !== burgerInputstate.price.value) {\r\n\t\t\tbody.append(\"price\", burgerInputstate.price.value);\r\n\t\t}\r\n\r\n\t\tif (burgerInputstate.photo.value !== \"\") {\r\n\t\t\tbody.append(\"photo\", burgerInputstate.photo.value);\r\n\t\t}\r\n\r\n\t\tlet updatedIngs = [];\r\n\t\t[...burgerIngredients].forEach((el) => {\r\n\t\t\tupdatedIngs.push({ ingredient: el._id, amount: el.amount });\r\n\t\t});\r\n\r\n\t\tlet updatedIngredients = JSON.stringify(updatedIngs);\r\n\t\tbody.append(\"ingredients\", updatedIngredients);\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await axios({\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\turl: `/api/v2/burgers/${params.slug}`,\r\n\t\t\t\tdata: body,\r\n\t\t\t});\r\n\r\n\t\t\tsetBurger(res.data.data);\r\n\t\t\tsetBurgerInputState({\r\n\t\t\t\tname: {\r\n\t\t\t\t\t...burgerInputstate.name,\r\n\t\t\t\t\tvalue: res.data.data.name,\r\n\t\t\t\t},\r\n\t\t\t\tprice: {\r\n\t\t\t\t\t...burgerInputstate.price,\r\n\t\t\t\t\tvalue: res.data.data.price,\r\n\t\t\t\t},\r\n\t\t\t\tphoto: {\r\n\t\t\t\t\t...burgerInputstate.photo,\r\n\t\t\t\t\tpreview: res.data.data.photoUrl,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tlet ingredients = [];\r\n\t\t\tres.data.data.ingredients.forEach((el) => {\r\n\t\t\t\tingredients.push({ ...el.ingredient, amount: el.amount });\r\n\t\t\t});\r\n\t\t\tsetBurgerIngredients(ingredients);\r\n\t\t} catch (err) {}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='burger-detail'>\r\n\t\t\t<form className='burger-detail-form' onSubmit={updateBurger}>\r\n\t\t\t\t<h3 className='heading-1 u-text-primary u-text-capitalize u-ftwt-400'>\r\n\t\t\t\t\tUpdate {burgerInputstate.name && burgerInputstate.name.value}\r\n\t\t\t\t</h3>\r\n\t\t\t\t{Object.keys(burgerInputstate).map((el) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<FormInput\r\n\t\t\t\t\t\t\tformState={burgerInputstate}\r\n\t\t\t\t\t\t\tkey={el}\r\n\t\t\t\t\t\t\tid={el}\r\n\t\t\t\t\t\t\tonFormStateChange={setBurgerInputState}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t<div className='burger-detail-burger form__group'>\r\n\t\t\t\t\t<CustomBurger hideCta ingredients={burgerIngredients} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='form__group'>\r\n\t\t\t\t\t<button type='submit' className='btn btn__primary'>\r\n\t\t\t\t\t\tUpdate Burger\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default BurgerDetail;\r\n","import React from \"react\";\r\n\r\nconst FormInput = (props) => {\r\n\tconst { id, formState, onFormStateChange } = props;\r\n\r\n\tconst onChangeHandler = (e) => {\r\n\t\tonFormStateChange({\r\n\t\t\t...formState,\r\n\t\t\t[id]: {\r\n\t\t\t\t...formState[id],\r\n\t\t\t\tvalue: e.target.value,\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tconst onFileChangeHandler = (e) => {\r\n\t\tonFormStateChange({\r\n\t\t\t...formState,\r\n\t\t\t[id]: {\r\n\t\t\t\t...formState[id],\r\n\t\t\t\tvalue: e.target.files[0],\r\n\t\t\t\tpreview: URL.createObjectURL(e.target.files[0]),\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tif (formState[id].type === \"file\") {\r\n\t\treturn (\r\n\t\t\t<div className='form__group form__group-sb'>\r\n\t\t\t\t<label className='btn btn__goto u-text-tertiary' htmlFor={id}>\r\n\t\t\t\t\tUpload Photo\r\n\t\t\t\t</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tonChange={onFileChangeHandler}\r\n\t\t\t\t\tname={id}\r\n\t\t\t\t\tid={id}\r\n\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\ttype={formState[id].type || \"text\"}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className='form__image'>\r\n\t\t\t\t\t<img src={formState[id].preview} alt={id} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='form__group'>\r\n\t\t\t<label htmlFor={id} className='form__label'>\r\n\t\t\t\t{formState[id].label}\r\n\t\t\t</label>\r\n\t\t\t<input\r\n\t\t\t\tclassName='form__input'\r\n\t\t\t\tvalue={formState[id].value}\r\n\t\t\t\tonChange={onChangeHandler}\r\n\t\t\t\tname={id}\r\n\t\t\t\tid={id}\r\n\t\t\t\tplaceholder={formState[id].placeholder}\r\n\t\t\t\ttype={formState[id].type || \"text\"}\r\n\t\t\t\trequired={formState[id].required}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FormInput;\r\n"],"sourceRoot":""}