(this["webpackJsonpburger-house-frontend"]=this["webpackJsonpburger-house-frontend"]||[]).push([[4],{112:function(e,t,r){"use strict";r.r(t);var n=r(6),a=r.n(n),c=r(10),s=r(23),u=r(1),o=r(0),i=r(5),l=r(18),d=r(87),f=r(83),p=r(28),b=r(88);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var j=o.createElement("path",{d:"M17.561 2.439c-1.442-1.443-2.525-1.227-2.525-1.227l-12.826 12.825-1.010 4.762 4.763-1.010 12.826-12.823c-0.001 0 0.216-1.083-1.228-2.527zM5.68 17.217l-1.624 0.35c-0.156-0.293-0.345-0.586-0.69-0.932s-0.639-0.533-0.932-0.691l0.35-1.623 0.47-0.469c0 0 0.883 0.018 1.881 1.016 0.997 0.996 1.016 1.881 1.016 1.881l-0.471 0.468z"});function m(e,t){var r=e.title,n=e.titleId,a=h(e,["title","titleId"]);return o.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",ref:t,"aria-labelledby":n},a),void 0===r?o.createElement("title",{id:n},"edit"):r?o.createElement("title",{id:n},r):null,j)}var O=o.forwardRef(m),x=(r.p,function(e){return Object(u.jsx)(O,{className:e.className})}),y=function(e){var t=e.user,r=e.onActionHandler,n=Object(i.d)((function(e){return e.auth.user}));return Object(u.jsxs)(f.a,{className:"user-list-item",children:[Object(u.jsxs)("h3",{className:"user-list-item__name u-text-capitalize",children:[t.name," ",t._id===n._id&&"(Me)"]}),Object(u.jsx)("p",{className:"user-list-item__role ".concat("admin"===t.role&&"u-text-tertiary u-text-uppercase"),children:t.role}),"customer"===t.role&&Object(u.jsx)(p.a,{onClick:function(){return r("edit",t._id)},children:Object(u.jsx)(x,{className:"u-fill-primary-60"})}),"customer"===t.role&&Object(u.jsx)(p.a,{onClick:function(){return r("delete",t._id)},children:Object(u.jsx)(b.a,{className:"u-fill-danger-60"})})]})},w=r(86),g=function(e){var t=e.confirmMessage,r=e.show,n=e.setShow,a=e.successHandler,c=e.dangerHandler;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w.a,{show:r,closeHandler:function(){return n(!1)}}),Object(u.jsx)("div",{className:"modal ".concat(r&&"modal--show"),children:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{className:"modal__msg",children:t}),Object(u.jsxs)("div",{className:"modal__cta",children:[Object(u.jsx)("button",{onClick:a,disabled:!r,className:"btn btn__success",children:"Yes"}),Object(u.jsx)("button",{onClick:c,disabled:!r,className:"btn btn__danger",children:"No"})]})]})})]})},k=r(7);t.default=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e.admin.allUsers})),r=Object(i.d)((function(e){return e.admin.allUsersInit})),n=Object(o.useState)(!1),f=Object(s.a)(n,2),p=f[0],b=f[1],v=Object(o.useState)(null),h=Object(s.a)(v,2),j=h[0],m=h[1],O=Object(o.useState)(null),x=Object(s.a)(O,2),w=x[0],E=x[1],N=Object(i.d)((function(e){return e.auth.user})),_=Object(k.g)();if(Object(o.useEffect)((function(){if(N&&"admin"!==N.role)return _.replace("/dashboard")}),[_,N]),Object(o.useEffect)((function(){e(d.d())}),[e]),r)return Object(u.jsx)(l.a,{fullScreen:!0});var H=function(e,t){b(!0),m(e),E(t)},S=function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(d.f(w,{role:"admin"}));case 2:e(d.d()),b(!1),m(null);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(d.a(w));case 2:e(d.d()),b(!1),m(null);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(g,{show:p,setShow:b,confirmMessage:"edit"===j?"Are you sure you want to make this user an admin ?":"are you sure you want to delete this user ?",successHandler:"edit"===j?S:C,dangerHandler:function(){return b(!1)}}),Object(u.jsxs)("div",{className:"manage-users",children:[Object(u.jsx)("h3",{className:"heading-1 u-text-primary",children:"Manage Users"}),Object(u.jsx)("ul",{className:"manage-users__list",children:t.map((function(e){return Object(u.jsx)(y,{onActionHandler:H,dangerHandler:function(){return b(!1)},user:e},e._id)}))})]})]})}},82:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return f})),r.d(t,"f",(function(){return p})),r.d(t,"g",(function(){return b})),r.d(t,"e",(function(){return v})),r.d(t,"d",(function(){return h}));var n=r(6),a=r.n(n),c=r(10),s=r(15),u=r.n(s),o=r(35),i=r(3),l=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:i.cb}),t.prev=1,t.next=4,u()({method:"PATCH",url:"/api/v2/users/me",data:e});case 4:n=t.sent,r({type:i.db}),r(Object(o.c)(n.data.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r((a=t.t0.response.data,{type:i.bb,error:a}));case 12:case"end":return t.stop()}var a}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},d=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:i.z}),e.prev=1,e.next=4,u()({method:"GET",url:"/api/v2/users/me/orders"});case 4:r=e.sent,t((a=r.data.data,{type:i.A,orders:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0.response.data,{type:i.y,error:n}));case 11:case"end":return e.stop()}var n,a}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:i.C}),t.prev=1,t.next=4,u()({method:"GET",url:"/api/v2/users/me/orders/".concat(e)});case 4:n=t.sent,r((c=n.data.data,{type:i.D,order:c})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r((a=t.t0.response.data,{type:i.B,error:a}));case 11:case"end":return t.stop()}var a,c}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},p=function(){return{type:i.fb}},b=function(e){return{type:i.gb,order:e}},v=function(e){return{type:i.eb,error:e}},h=function(e,t){return function(){var r=Object(c.a)(a.a.mark((function r(n){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(p()),r.prev=1,r.next=4,u()({method:"PATCH",url:"/api/v2/users/me/orders/".concat(e),data:{status:t||"cancelled"}});case 4:c=r.sent,n(b(c.data.data)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n(v(r.t0.response.data));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}},83:function(e,t,r){"use strict";var n=r(1);r(0);t.a=function(e){return Object(n.jsx)("div",{onClick:e.onClick,className:"base-list-item ".concat(e.className),children:e.children})}},86:function(e,t,r){"use strict";var n=r(1);r(0);t.a=function(e){var t=e.show,r=e.closeHandler;return Object(n.jsx)("div",{onClick:r,className:"backdrop ".concat(t&&"backdrop--show")})}},87:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return f})),r.d(t,"e",(function(){return p})),r.d(t,"d",(function(){return v})),r.d(t,"f",(function(){return h})),r.d(t,"a",(function(){return j}));var n=r(6),a=r.n(n),c=r(2),s=r(10),u=r(3),o=r(82),i=r(15),l=r.n(i),d=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.k}),t.prev=1,t.next=4,l()({method:"GET",url:"/api/v2/orders/admin",params:Object(c.a)({},e)});case 4:n=t.sent,r((s=n.data.data,{type:u.o,orders:s})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r((a=t.t0.response.data,{type:u.j,error:a}));case 11:case"end":return t.stop()}var a,s}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.m}),e.prev=1,e.next=4,l()({method:"GET",url:"/api/v2/orders/admin/orderStats"});case 4:r=e.sent,t((a=r.data.orderStats,{type:u.n,orderStats:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((n=e.t0.response.data,{type:u.l,error:n}));case 11:case"end":return e.stop()}var n,a}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e,t){return function(){var r=Object(s.a)(a.a.mark((function r(n){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Object(o.f)()),r.prev=1,r.next=4,l()({method:"PATCH",url:"/api/v2/orders/admin/".concat(e),data:t});case 4:c=r.sent,n(Object(o.g)(c.data.data)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n(Object(o.e)(r.t0.response.data));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},b=function(e){return{type:u.p,error:e}},v=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.q}),e.prev=1,e.next=4,l()({method:"GET",url:"/api/v2/users"});case 4:r=e.sent,t((n=r.data.data,{type:u.r,users:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(b(e.t0.response.data));case 11:case"end":return e.stop()}var n}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},h=function(e,t){return function(){var r=Object(s.a)(a.a.mark((function r(n){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l()({method:"PATCH",url:"/api/v2/users/".concat(e),data:t});case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),n(b(r.t0.response.data));case 8:case"end":return r.stop()}}),r,null,[[0,5]])})));return function(e){return r.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l()({method:"DELETE",url:"/api/v2/users/".concat(e)});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),r(b(t.t0.response.data));case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}},88:function(e,t,r){"use strict";var n=r(2),a=r(1),c=r(0);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=c.createElement("path",{d:"M3.389 7.113l1.101 10.908c0.061 0.461 2.287 1.977 5.51 1.979 3.225-0.002 5.451-1.518 5.511-1.979l1.102-10.908c-1.684 0.942-4.201 1.387-6.613 1.387-2.41 0-4.928-0.445-6.611-1.387zM13.168 1.51l-0.859-0.951c-0.332-0.473-0.692-0.559-1.393-0.559h-1.831c-0.7 0-1.061 0.086-1.392 0.559l-0.859 0.951c-2.57 0.449-4.434 1.64-4.434 2.519v0.17c0 1.547 3.403 2.801 7.6 2.801 4.198 0 7.601-1.254 7.601-2.801v-0.17c0-0.879-1.863-2.070-4.433-2.519zM12.070 4.34l-1.070-1.34h-2l-1.068 1.34h-1.7c0 0 1.862-2.221 2.111-2.522 0.19-0.23 0.384-0.318 0.636-0.318h2.043c0.253 0 0.447 0.088 0.637 0.318 0.248 0.301 2.111 2.522 2.111 2.522h-1.7z"});function i(e,t){var r=e.title,n=e.titleId,a=u(e,["title","titleId"]);return c.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",ref:t,"aria-labelledby":n},a),void 0===r?c.createElement("title",{id:n},"trash"):r?c.createElement("title",{id:n},r):null,o)}var l=c.forwardRef(i);r.p,t.a=function(e){return Object(a.jsx)(l,Object(n.a)({},e))}}}]);
//# sourceMappingURL=4.45d94db8.chunk.js.map