!function(){function e(e,r,t,a){Object.defineProperty(e,r,{get:t,set:a,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequireb892;r.register("77Q7T",(function(t,a){var n;n=t.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",(function(){return b}));var s=r("9DAHI"),o=r("21wn6"),u=r("MTsmO"),i=r("bxYpe"),l=r("6HHIu"),d=r("eG9zp"),c=r("7NZTF"),f=r("ekXAx"),p=r("39Qpo"),m=r("2WtOj"),g=r("9mkch"),w=r("et4Du"),h=r("5xGyg"),y=r("glVET"),x=u.object().shape({name:u.string().required("user must have a name"),email:u.string().required("user must have an email address").email("please enter a valid email")}),v=u.object().shape({currentPassword:u.string().required("please provide your current password"),password:u.string().required("user must provide a password").min(6,"password must contain atleast 6 characters"),passwordConfirm:u.string().required("users must confirm their password").when("password",{is:function(e){return!!(e&&e.length>0)},then:u.string().oneOf([u.ref("password")],"passwords do not match")})}),b=function(){var e=l.useQueryClient(),r=p.default(),t=r.alertMessage,a=r.alertType,n=r.setAlert,u=r.showAlert,b=g.default(),j=b.error,S=b.imagefile,T=b.imageUrl,P=b.uploadFile,C=y.useHistory(),k=e.getQueryData("user"),U=o.useRef(),_=w.default({onSuccess:function(){n("success","your details have been updated!")},onError:function(){n("danger","could not update yout details")}}),D=_.isLoading,L=_.updateDetails,E=h.default({onSuccess:function(){n("success","your password has been updated! You will be logged out")},onError:function(e){n("danger","could not update yout details")},onSettled:function(e,r){e&&setTimeout((function(){C.replace("/auth/logout")}),1500)}}),F=E.isLoading,H=E.updatePassword;return o.useEffect((function(){j&&n("danger",j)}),[j]),s.jsxs(s.Fragment,{children:[u&&s.jsx(m.default,{position:"top-center",type:a,children:t}),s.jsxs("div",{className:"profile",children:[s.jsx(i.Formik,{validationSchema:x,initialValues:{name:null==k?void 0:k.name,email:null==k?void 0:k.email},onSubmit:function(e){var r=e.name,t=e.email,a=new FormData;a.append("name",r),a.append("email",t),S&&a.append("photo",S),L(a)},children:s.jsxs(i.Form,{autoComplete:"off",className:"profile__form profile__form--1",children:[s.jsx("h2",{className:"heading-2 u-text-primary u-ftwt-400 u-mb-5",children:"Update User Details"}),s.jsx(c.default,{label:"Name",name:"name"}),s.jsx(c.default,{label:"Email",name:"email"}),s.jsxs("div",{className:"u-mb-5 profile__form-photo",children:[s.jsx(d.default,{type:"button",onClick:function(){U.current.click()},variant:"outlined",size:"sm",children:"Upload Photo"}),s.jsx("input",{onChange:P,type:"file",style:{display:"none"},ref:U}),s.jsx(f.default,{src:T||""+(null==k?void 0:k.photoUrl),alt:null==k?void 0:k.name,size:"sm"})]}),s.jsx(d.default,{type:"submit",color:"tertiary",children:D?"Loading...":"Update Details"})]})}),s.jsx(i.Formik,{initialValues:{currentPassword:"",password:"",passwordConfirm:""},validationSchema:v,onSubmit:function(e){H(e)},children:function(){return s.jsxs(i.Form,{autoComplete:"off",className:"profile__form profile__form--2",children:[s.jsx("h2",{className:"heading-2 u-text-primary u-mb-8 u-ftwt-400",children:"Update User Password"}),s.jsx(c.default,{label:"Current Password",name:"currentPassword",type:"password"}),s.jsx(c.default,{label:"Password",name:"password",type:"password"}),s.jsx(c.default,{label:"Password Confirm",name:"passwordConfirm",type:"password"}),s.jsx(d.default,{color:"tertiary",children:F?"Loading...":"Update Password"})]})}})]})]})}})),r.register("9mkch",(function(t,a){e(t.exports,"default",(function(){return u}));var n=r("eGTdo"),s=r("21wn6"),o=["webp","jpeg","jpg","png","svg+xml"],u=function(){var e=n.slicedToArray(s.useState(),2),r=e[0],t=e[1],a=n.slicedToArray(s.useState(),2),u=a[0],i=a[1],l=n.slicedToArray(s.useState(),2),d=l[0],c=l[1];return{error:r,imagefile:u,imageUrl:d,uploadFile:function(e){if(t(null),!e.target.files[0])return t("please upload an image");if(!o.includes(e.target.files[0].type.split("/")[1]))return t("please upload images only");i(e.target.files[0]);var r=URL.createObjectURL(e.target.files[0]);c(r)}}}})),r.register("et4Du",(function(t,a){e(t.exports,"default",(function(){return l}));var n=r("eGTdo"),s=r("6HHIu"),o=r("l7kuk"),u=r("ijCuw"),i=n.asyncToGenerator(u.mark((function e(r){var t;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default({method:"PATCH",url:"/api/v2/users/me",data:r});case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)}))),l=function(e){var r=e.onError,t=e.onSettled,a=e.onSuccess,n=s.useQueryClient(),o=s.useMutation((function(e){return i(e)}),{onSuccess:function(e){n.setQueryData("user",e),a&&a(e)},onError:function(e){r&&r(e)},onSettled:function(e,r){t&&t(e,r)}}),u=o.mutate,l=o.isLoading;return{updateDetails:u,data:o.data,isLoading:l,error:o.error}}})),r.register("5xGyg",(function(t,a){e(t.exports,"default",(function(){return l}));var n=r("eGTdo"),s=r("l7kuk"),o=r("6HHIu"),u=r("ijCuw"),i=n.asyncToGenerator(u.mark((function e(r){var t;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default({method:"POST",url:"/api/v2/users/updateCurrentUserPassword",data:r});case 2:return t=e.sent,e.abrupt("return",t.data.user);case 4:case"end":return e.stop()}}),e)}))),l=function(e){var r=e.onError,t=e.onSettled,a=e.onSuccess,n=o.useMutation((function(e){return i(e)}),{onSuccess:function(e){a&&a(e)},onError:function(e){r&&r(e)},onSettled:function(e,r){t&&t(e,r)}}),s=n.mutate,u=n.isLoading;return{updatePassword:s,data:n.data,isLoading:u,error:n.error}}}))}();