(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[10],{116:function(e,t,r){"use strict";r.r(t);var a=r(13),n=r(14),s=r(16),o=r(15),c=r(1),u=r.n(c),d=r(8),i=r(98),l=r(82),p=r(80),m=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"render",value:function(){return u.a.createElement(p.a,null,u.a.createElement(i.a,Object.assign({orders:this.props.orders,getAllOrders:this.props.getAllOrders,heading:"Manage Orders",loading:this.props.getOrdersInit,showOrdersStatus:!0,totalOrders:this.props.totalOrders,totalOrdersPrice:this.props.totalOrdersPrice,totalCompletedOrders:this.props.totalCompletedOrders,totalPendingOrders:this.props.totalPendingOrders,totalCancelledOrders:this.props.totalCancelledOrders},this.props)))}}]),r}(c.Component);t.default=Object(d.b)((function(e){return{orders:e.orders.orders,getOrdersInit:e.orders.getOrdersInit,user:e.auth.user,totalOrders:e.orders.totalOrders,totalOrdersPrice:e.orders.totalOrdersPrice,totalCompletedOrders:e.orders.totalCompletedOrders,totalPendingOrders:e.orders.totalPendingOrders,totalCancelledOrders:e.orders.totalCancelledOrders}}),(function(e){return{getAllOrders:function(t){return e(l.c(t))}}}))(m)},78:function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(t,"a",(function(){return n}))},80:function(e,t,r){"use strict";var a=r(4),n=r.n(a),s=r(7),o=r(13),c=r(14),u=r(16),d=r(15),i=r(1),l=r.n(i),p=r(8),m=r(19),h=r(5),O=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.checkAuthState();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.user?this.props.children:l.a.createElement(h.a,{to:"/login"})}}]),r}(i.Component);t.a=Object(p.b)((function(e){return{user:e.auth.user,checkAuthInit:e.auth.checkAuthInit}}),(function(e){return{checkAuthState:function(){return e(m.a())}}}))(O)},82:function(e,t,r){"use strict";r.d(t,"d",(function(){return p})),r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return O})),r.d(t,"c",(function(){return b})),r.d(t,"f",(function(){return y})),r.d(t,"e",(function(){return _}));var a=r(4),n=r.n(a),s=r(78),o=r(0),c=r(7),u=r(2),d=r(18),i=r.n(d),l=function(e){return{type:u.O,error:e}},p=function(){return function(){var e=Object(c.a)(n.a.mark((function e(t){var r,a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.P}),e.prev=1,e.next=4,i.a.get("/api/v1/orders/me");case 4:r=e.sent,a=Object.keys(r.data.orders).map((function(e){return Object(o.a)(Object(o.a)({},r.data.orders[e]),{},{orders:[].concat(Object(s.a)(r.data.orders[e].customOrders),Object(s.a)(r.data.orders[e].menuOrders)),customOrders:null,menuOrders:null})})),t((n=a,{type:u.Q,orders:n})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),c=Object(o.a)({},e.t0).response,t(l(c));case 13:case"end":return e.stop()}var n}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){return{type:u.o,error:e}},h=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(r){var a,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.p}),t.prev=1,t.next=4,i()({method:"POST",url:"/api/v1/orders",data:e});case 4:a=t.sent,r((n=a.data.orders,{type:u.q,orders:n})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),s=Object(o.a)({},t.t0).response,r(m(s));case 12:case"end":return t.stop()}var n}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},O=function(){return{type:u.f}},f=function(e){var t=e.order,r=e.totalOrders,a=e.pendingOrders,n=e.completedOrders,s=e.totalPrice;return{type:u.K,orders:t,totalOrders:r,pendingOrders:a,completedOrders:n,totalPrice:s}},v=function(e){return{type:u.I,error:e}},b=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(r){var a,c,d,l,p,m,h,O,b;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.J}),t.prev=1,a=[],c="",t.next=6,i.a.get("/api/v1/orders");case 6:if(l=t.sent,"All Orders"===e){t.next=13;break}return c="?status=".concat(e),t.next=11,i.a.get("/api/v1/orders".concat(c));case 11:d=t.sent,Object.keys(d.data.orders).map((function(e){return a.push(Object(o.a)(Object(o.a)({},d.data.orders[e]),{},{orders:[].concat(Object(s.a)(l.data.orders[e].customOrders),Object(s.a)(l.data.orders[e].menuOrders)),customOrders:null,menuOrders:null})),a}));case 13:p=l.data.orders.length,m=0,h=0,O=0,Object.keys(l.data.orders).map((function(t){return"pending"===l.data.orders[t].status?h+=1:"delivered"===l.data.orders[t].status&&(O+=1),"cancelled"!==l.data.orders[t].status&&(m+=l.data.orders[t].price),"All Orders"===e?(a.push(Object(o.a)(Object(o.a)({},l.data.orders[t]),{},{orders:[].concat(Object(s.a)(l.data.orders[t].customOrders),Object(s.a)(l.data.orders[t].menuOrders)),customOrders:null,menuOrders:null})),a):""})),r(f({order:a,totalOrders:p,pendingOrders:h,completedOrders:O,totalPrice:m})),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(1),b=Object(o.a)({},t.t0).response,r(v(b));case 25:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return{type:u.Hb,response:e}},y=function(e){var t=e.status,r=e._id;return function(){var e=Object(c.a)(n.a.mark((function e(a){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i()({url:"/api/v1/orders/".concat(r),method:"PATCH",data:{status:t}});case 3:s=e.sent,a(g(s.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(g(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return{type:u.Z,order:e}},_=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(r){var a,c,d;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.Y}),t.prev=1,t.next=4,i()({url:"/api/v1/orders/".concat(e),method:"get"});case 4:a=t.sent,d=[],a.data.order.customOrders.map((function(e){return d.push({_id:{ingredients:e.ingredients,title:e.name,foodType:e.foodType,_id:e._id,photo:e.photo,price:e.price},items:parseInt(e.items)}),d})),c=Object(o.a)(Object(o.a)({},a.data.order),{},{orders:[].concat(d,Object(s.a)(a.data.order.menuOrders)),customOrders:null,menuOrders:null}),r(j(c)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),r((n=t.t0.response.data,{type:u.Z,error:n}));case 14:case"end":return t.stop()}var n}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}},87:function(e,t,r){"use strict";var a=r(1),n=r.n(a),s=r(24);t.a=function(e){return n.a.createElement(s.b,{to:e.to?e.to:"#",className:"list__item ".concat(e.className),style:{listStyle:"none"}},e.children)}},90:function(e,t,r){"use strict";var a=r(1),n=r.n(a);t.a=function(e){return n.a.createElement("div",{className:"card__status ".concat(e.className)},n.a.createElement("h2",null,e.heading),n.a.createElement("p",null,e.value))}},98:function(e,t,r){"use strict";var a=r(4),n=r.n(a),s=r(7),o=r(0),c=r(13),u=r(14),d=r(16),i=r(15),l=r(1),p=r.n(l),m=r(87),h=function(e){var t="".concat(e.date).split("T"),r=new Date(e.date).getHours(),a=new Date(e.date).getMinutes(),n=new Date(e.date).getSeconds(),s="".concat(r,":").concat(a,":").concat(n);return t="".concat(t[0],"\n").concat(s),p.a.createElement(m.a,{className:"orders__list-item orders__list-item-".concat(e.status),to:e.to},p.a.createElement("p",{className:"orders__list-item-date"},t),p.a.createElement("h3",{className:"orders__list-item-name"},"#",e.id," (",e.results,")"),p.a.createElement("h2",{className:"orders__list-item-price"},"Rs ",e.price))},O=r(20),f=r(90),v=r(32),b=function(e){Object(d.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(c.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={formInput:{orders:"pending"}},e.onChangeHandler=function(t){var r=Object(v.b)(t,Object(o.a)({},e.state));e.setState(Object(o.a)({},r))},e.onFilterHandler=function(){e.props.getAllOrders(e.state.formInput.orders)},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getAllOrders(this.state.formInput.orders);case 2:this.props.user||this.props.history.push("/login");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.orders;return this.props.loading?p.a.createElement("div",{className:"u-flex-center dashboard__dashboard u-bg-white u-vh-100"},p.a.createElement(O.a,null)):this.props.orders?p.a.createElement("div",{className:"orders orders-status-".concat(this.props.showOrdersStatus," dashboard__dashboard")},p.a.createElement("h2",{className:"orders__heading heading-1 u-text-primary"},this.props.heading),this.props.showOrdersStatus&&p.a.createElement("h2",{className:"orders__price heading-2"},p.a.createElement("span",{className:"u-text-success u-ftwt-400"},"Total Amount:\xa0"),p.a.createElement("span",{className:"u-text-tertiary"},"Rs ",this.props.totalOrdersPrice.toFixed(2))),this.props.showOrdersStatus&&p.a.createElement("div",{className:"orders__status"},p.a.createElement(f.a,{className:"u-text-danger",heading:"total Orders",value:this.props.totalOrders}),p.a.createElement(f.a,{className:"u-text-grey-dark",heading:"Cancelled Orders",value:this.props.totalCancelledOrders}),p.a.createElement(f.a,{className:"u-text-success",heading:"Delivered orders",value:this.props.totalCompletedOrders}),p.a.createElement(f.a,{className:"u-text-danger",heading:"pending orders",value:this.props.totalPendingOrders})),this.props.showOrdersStatus&&p.a.createElement("div",{className:"form__group u-text-center orders__filter"},p.a.createElement("select",{name:"orders",id:"orders",className:"form__input u-mr-2",onChange:this.onChangeHandler,value:this.state.formInput.orders},p.a.createElement("option",{value:"pending"},"Pending Orders"),p.a.createElement("option",{value:"All Orders"},"All Orders"),p.a.createElement("option",{value:"delivered"},"Delivered Orders"),p.a.createElement("option",{value:"cancelled"},"Cancelled Orders")),p.a.createElement("button",{onClick:this.onFilterHandler,type:"submit",className:"btn__primary btn"},"Filter")),p.a.createElement("div",{className:"orders__list"},t.length>0?t.map((function(t){return p.a.createElement(h,{key:t._id,id:t._id,results:t.orders.length,price:t.price,date:t.createdAt,status:t.status,to:"".concat(e.props.match.url,"/").concat(t._id)})})):p.a.createElement("h4",{className:"orders__list--empty"},"There are no Orders Left"))):p.a.createElement("h4",{className:"u-text-success"},"You have no orders")}}]),r}(l.Component);t.a=b}}]);
//# sourceMappingURL=10.24fbf84d.chunk.js.map