(this["webpackJsonpburger-house"]=this["webpackJsonpburger-house"]||[]).push([[5],{116:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),s=n(11),c=n(14),i=n(15),o=n(17),u=n(16),p=n(0),l=n(1),d=n.n(l),m=n(12),f=n(93),g=n(92),b=n(82),h=n(84),v=n(20),y=n(78),O=n(76),_=function(e){var t={};return Object.keys(e).map((function(n){return t[n]=Object(p.a)(Object(p.a)({},e[n]),{},{value:0}),t})),t},j=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={formInput:{title:"",price:"",amount:"",foodType:"vegetarian",ingredients:null},previewPhoto:"",photo:"",alert:{show:!1,status:"",message:""}},e.showAlertHandler=function(t,n){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{alert:{show:!0,status:n,message:t}}))},e.onCloseHandler=function(){e.closeAlertTimer=setTimeout((function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{alert:{show:!1,status:"",message:""}}))}),2e3)},e.onChangeHandler=function(t){var n=Object(y.b)(t,Object(p.a)({},e.state));e.setState(Object(p.a)({},n))},e.changeFileHandler=function(t){e.setState({previewPhoto:URL.createObjectURL(t.target.files[0]),photo:t.target.files[0]})},e.resetIngredients=Object(s.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showAlertHandler("Ingredients were set to default","fail"),n=_(e.props.ingredients),t.next=4,e.props.setIngredients(n);case 4:case"end":return t.stop()}}),t)}))),e.addIngredientsToBurger=function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.showAlertHandler("Ingredients were added successfully","success"),r=[],Object.keys(n).map((function(e){return r.push(Object(p.a)({},n[e]))})),e.setState({formInput:Object(p.a)(Object(p.a)({},e.state.formInput),{},{ingredients:r})});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submitBurgerHandler=function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.state.formInput.ingredients){t.next=3;break}return t.abrupt("return",e.showAlertHandler("Oops You forgot to add or save Ingredients","fail"));case 3:return(r=new FormData).append("title",e.state.formInput.title),r.append("price",e.state.formInput.price),r.append("foodType",e.state.formInput.foodType),r.append("ingredients",JSON.stringify(e.state.formInput.ingredients)),""!==e.state.photo&&r.append("photo",e.state.photo,e.state.photo.name),t.next=11,e.props.createBurger(r);case 11:e.setState({photo:"",previewPhoto:"",formInput:{title:"",price:"",amount:"",foodType:"vegetarian",ingredients:null}}),e.resetIngredients(e.props.ingredients),"success"===e.props.createBurgerStatus.status?(e.showAlertHandler("Added Burger to menu successfully","success"),e.successTimer=setTimeout((function(){return e.props.history.replace("/dashboard/manage-menu")}),2e3)):e.showAlertHandler(e.props.createBurgerStatus.message,"fail");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchIngredients();case 2:t=_(this.props.ingredients),this.props.setIngredients(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props.menuIngs;return this.props.createBurgerInit||this.props.ingredientsInit?d.a.createElement("div",{className:"dashboard__dashboard u-flex-center u-vh-100"},d.a.createElement(v.a,null)):d.a.createElement(d.a.Fragment,null,this.state.alert.status&&d.a.createElement(O.a,{close:this.onCloseHandler(),show:this.state.alert.show,status:this.state.alert.status,message:this.state.alert.message}),d.a.createElement("div",{className:"burger__new dashboard__dashboard"},d.a.createElement("h2",{className:"heading-1 burger__new-heading"},"Create New Burger"),d.a.createElement("form",{className:"burger__new-create",autoComplete:"off",onSubmit:this.submitBurgerHandler},d.a.createElement("div",{className:"burger__new-create-form"},d.a.createElement(b.a,{inputtype:"input",type:"text",name:"title",label:"Name",value:this.state.formInput.title,onChange:this.onChangeHandler}),d.a.createElement(b.a,{inputtype:"input",type:"number",name:"price",label:"price",onChange:this.onChangeHandler,value:this.state.formInput.price}),d.a.createElement("div",{className:"form__group"},d.a.createElement("label",{htmlFor:"foodType"},"Diet"),d.a.createElement("select",{name:"foodType",id:"foodType",onChange:this.onChangeHandler,value:this.state.formInput.foodType,className:"form__input"},d.a.createElement("option",{value:"vegetarian"},"Vegetarian"),d.a.createElement("option",{value:"non-vegetarian"},"Non Vegetarian")))),d.a.createElement("div",{className:"custom-burger"},d.a.createElement(g.a,{ingredients:e}),d.a.createElement("div",{className:"controls"},d.a.createElement(f.a,{ingredients:e,NotfoodType:"".concat(this.state.formInput.foodType).startsWith("v")?"non-vegetarian":"vegetarian",foodType:this.state.formInput.foodType,hidePrice:!0,success:this.addIngredientsToBurger,danger:this.resetIngredients,successField:"Confirm Ingredients",dangerField:"Reset Ingredients",addIngredient:this.props.addIngredient,removeIngredient:this.props.removeIngredient}))),d.a.createElement("div",{className:"burger__new-create-image-bg"},d.a.createElement("input",{type:"file",style:{display:"none"},name:"photo",id:"photo",onChange:this.changeFileHandler}),d.a.createElement("label",{htmlFor:"photo",className:"btn btn__tertiary-goTo"},"Upload Image"),""!==this.state.previewPhoto?d.a.createElement("img",{src:this.state.previewPhoto,alt:"burger",className:"burger__new-create-image-bg-image"}):d.a.createElement("div",{className:"bg-image"})),d.a.createElement("button",{type:"submit",className:"burger__new-create-btn btn btn__tertiary"},"Save Burger"))))}}]),n}(l.Component);t.default=Object(m.b)((function(e){return{ingredients:e.menu.ingredients,ingredientsInit:e.menu.ingredientsInit,menuIngs:e.menu.menuIngs,createBurgerStatus:e.menu.createBurgerStatus,createBurgerInit:e.menu.createBurgerInit}}),(function(e){return{fetchIngredients:function(){return e(h.d())},addIngredient:function(t){return e(h.a(t))},removeIngredient:function(t){return e(h.f(t))},setIngredients:function(t){return e(h.g(t))},createBurger:function(t){return e(h.b(t))}}}))(j)},76:function(e,t,n){"use strict";var r=n(1),a=n.n(r);t.a=function(e){return a.a.createElement("div",{className:"alert alert__".concat(e.show," alert--").concat(e.status," ").concat(e.className)},e.message)}},77:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return a}))},78:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(8),a=n(0),s=function(e,t){return Object(a.a)(Object(a.a)({},t),{},{formInput:Object(a.a)(Object(a.a)({},t.formInput),{},Object(r.a)({},e.target.name,e.target.value))})},c=function(e){var t=Object(a.a)({},e.formInput),n={};return Object.keys(t).map((function(e){return n[e]=""})),n}},79:function(e,t,n){(function(t){var n=t&&t.pid?t.pid.toString(36):"";function r(){var e=Date.now(),t=r.last||e;return r.last=e>t?e:t+1}e.exports=e.exports.default=function(e,t){return(e||"")+""+n+r().toString(36)+(t||"")},e.exports.process=function(e,t){return(e||"")+n+r().toString(36)+(t||"")},e.exports.time=function(e,t){return(e||"")+r().toString(36)+(t||"")}}).call(this,n(46))},81:function(e,t,n){"use strict";var r=n(1),a=n.n(r);t.a=function(e){var t,n=!1;return 0===e.items&&(n=!0,t="btn btn__primary-disabled"),a.a.createElement("div",{className:"btn__addOrRemove ".concat(e.className)},a.a.createElement("button",{type:"button",onClick:e.addItem,className:e.classes},"+"),a.a.createElement("p",{className:"u-text-tertiary ".concat(e.valueClass)},e.items),a.a.createElement("button",{type:"button",onClick:e.removeItem,disabled:n,className:t||e.classes},"-"))}},82:function(e,t,n){"use strict";var r=n(1),a=n.n(r);t.a=function(e){if("input"===e.inputtype){var t=!1!==e.required;return a.a.createElement("div",{className:"form__group "},a.a.createElement("label",{className:"form__label"},e.label),a.a.createElement("input",{type:e.type,name:e.name,id:e.name,placeholder:e.placeholder,className:"form__".concat(e.inputtype," ").concat(e.className),onChange:e.onChange,minLength:e.minLength,value:e.value,required:t}))}if("submit"===e.inputtype){var n=a.a.createElement("input",Object.assign({type:"submit",value:e.value,className:"btn btn__".concat(e.variant," ").concat(e.className)},e));return a.a.createElement("div",{className:"form__group ".concat(e.formGroupClass)},n)}}},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return f}));var r=n(5),a=n.n(r),s=n(0),c=n(11),i=n(2),o=n(18),u=n.n(o),p=function(e){return{type:i.b,name:e}},l=function(e){return{type:i.lb,name:e}},d=function(e){return{type:i.g,ingredients:e}},m=function(){return{type:i.h}},f=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/v1/ingredients");case 3:n=e.sent,t((a=n.data.ingredients,{type:i.H,ingredients:a})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t((r=Object(s.a)({},e.t0).response.data,{type:i.F,error:r}));case 10:case"end":return e.stop()}var r,a}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}},84:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y}));var r=n(5),a=n.n(r),s=n(0),c=n(11),i=n(2),o=n(18),u=n.n(o),p=n(83),l=function(e){return{type:i.E,burgers:e}},d=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:i.G}),e.prev=1,e.next=4,u.a.get("/api/v1/ingredients");case 4:n=e.sent,t((a=n.data.ingredients,{type:i.H,ingredients:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=Object(s.a)({},e.t0).response.data,{type:i.F,error:r}));case 11:case"end":return e.stop()}var r,a}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:i.D}),e.prev=1,e.next=4,u.a.get("/api/v1/burgers");case 4:n=e.sent,r=n.data.burgers,t(l(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),c=Object(s.a)({},e.t0).response?Object(s.a)({},e.t0).response:e.t0,t((a=c,{type:i.C,error:a}));case 13:case"end":return e.stop()}var a}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return{type:i.yb,name:e}},g=function(e){return{type:i.zb,name:e}},b=function(e){return{type:i.mb,ings:e}},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._id?e._id:e.get("_id"),t.prev=1,t.next=4,u()({url:"/api/v1/burgers/".concat(r),data:e,method:"PATCH"});case 4:c=t.sent,n((o=c.data,{type:i.ob,status:o})),n(m()),n(Object(p.d)()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n((a=Object(s.a)({},t.t0.response.data),{type:i.nb,error:a}));case 13:case"end":return t.stop()}var a,o}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u()({url:"/api/v1/burgers",data:e,method:"POST"});case 3:r=t.sent,n((c=r.data,{type:i.k,status:c})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n((a=Object(s.a)({},t.t0.response.data),{type:i.i,error:a}));case 10:case"end":return t.stop()}var a,c}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.t}),t.next=4,u()({url:"/api/v1/burgers/".concat(e),method:"delete"});case 4:r=t.sent,n((c=r.data,{type:i.u,response:c})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n((a=Object(s.a)({},t.t0.response.data),{type:i.s,error:a}));case 11:case"end":return t.stop()}var a,c}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},92:function(e,t,n){"use strict";var r=n(77),a=n(14),s=n(15),c=n(17),i=n(16),o=n(1),u=n.n(o),p=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e;switch(this.props.ingredient){case"breadTop":e=u.a.createElement("div",{className:"bread-top"});break;case"breadBottom":e=u.a.createElement("div",{className:"bread-bottom"});break;case"chicken":e=u.a.createElement("div",{className:"chicken"});break;case"aloo":e=u.a.createElement("div",{className:"aloo"});break;case"lettuce":e=u.a.createElement("div",{className:"lettuce"});break;case"paneer":e=u.a.createElement("div",{className:"paneer"});break;case"cheese":e=u.a.createElement("div",{className:"cheese"});break;case"tomatoes":e=u.a.createElement("div",{className:"tomatoes"});break;default:e=null}return e}}]),n}(o.Component),l=n(79),d=n.n(l),m=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=null;return this.props.ingredients&&(t=Object.keys(this.props.ingredients).map((function(t){return Object(r.a)(Array(e.props.ingredients[t].value)).map((function(){return u.a.createElement(p,{key:d()(),ingredient:t})}))}))),u.a.createElement("div",{className:"burger"},u.a.createElement(p,{ingredient:"breadTop"}),t,u.a.createElement(p,{ingredient:"breadBottom"}))}}]),n}(o.Component);t.a=m},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(14),a=n(15),s=n(17),c=n(16),i=n(1),o=n.n(i),u=n(81),p=function(e){return o.a.createElement("div",{className:"controls__ingredient"},o.a.createElement("img",{src:e.photo,alt:"ingredient",className:"controls__ingredient-img"}),o.a.createElement("p",{className:"controls__ingredient-name"},e.name),o.a.createElement(u.a,{addItem:e.addIng,removeItem:e.removeIng,items:parseInt(e.items),classes:"btn btn__primary btn__primary-round",valueClass:"u-fontSize-2rem"}))},l=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e,t=this,n={},r=!0,a=this.props.hidePrice?{display:"none"}:null;return e=this.props.ingredients?Object.keys(this.props.ingredients).filter((function(e){return t.props.ingredients[e].foodType!==t.props.NotfoodType})).map((function(e){return t.props.ingredients[e].value>0&&(r=!1,n[e]={name:e,_id:t.props.ingredients[e]._id,amount:t.props.ingredients[e].value}),o.a.createElement(p,{name:e,key:e,items:t.props.ingredients[e].value,photo:t.props.ingredients[e].photo,addIng:function(){return t.props.addIngredient(e)},removeIng:function(){return t.props.removeIngredient(e)}})})):"",o.a.createElement("div",{className:"controls__ingredients ".concat(this.props.className)},o.a.createElement("p",{className:"controls__price",style:a},"Total Price:\xa0",o.a.createElement("span",{className:"controls__price-value"},"Rs\xa0",this.props.totalBurgerPrice)),e,o.a.createElement("button",{type:"button",onClick:this.props.danger,className:"btn btn__danger--outline"}," ",this.props.dangerField," "),o.a.createElement("button",{type:this.props.successBtnType?this.props.successBtnType:"button",onClick:function(){return t.props.success(n,t.props.foodType)},disabled:r,className:"btn btn__success".concat(!0===r?"--outline-disabled":"--outline")},this.props.successField))}}]),n}(i.Component)}}]);
//# sourceMappingURL=5.893b4aca.chunk.js.map