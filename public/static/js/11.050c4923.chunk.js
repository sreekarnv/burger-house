(this["webpackJsonpburger-house"]=this["webpackJsonpburger-house"]||[]).push([[11],{113:function(e,t,r){"use strict";r.r(t);var a=r(12),n=r(13),s=r(15),c=r(14),o=r(1),u=r.n(o),d=r(6),i=r(97),l=r(80),p=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r,[{key:"render",value:function(){return u.a.createElement(i.a,Object.assign({orders:this.props.userOrders,loading:this.props.userOrdersInit,getAllOrders:this.props.getAllUserOrders,heading:"My Orders",showOrdersStatus:!1},this.props))}}]),r}(o.Component);t.default=Object(d.b)((function(e){return{userOrdersInit:e.orders.getUserOrdersInit,userOrders:e.orders.userOrders,user:e.auth.user}}),(function(e){return{getAllUserOrders:function(){return e(l.d())}}}))(p)},77:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return c}));var a=r(8),n=r(0),s=function(e,t){return Object(n.a)(Object(n.a)({},t),{},{formInput:Object(n.a)(Object(n.a)({},t.formInput),{},Object(a.a)({},e.target.name,e.target.value))})},c=function(e){var t=Object(n.a)({},e.formInput),r={};return Object.keys(t).map((function(e){return r[e]=""})),r}},78:function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(t,"a",(function(){return n}))},80:function(e,t,r){"use strict";r.d(t,"d",(function(){return p})),r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return O})),r.d(t,"c",(function(){return v})),r.d(t,"f",(function(){return y})),r.d(t,"e",(function(){return _}));var a=r(5),n=r.n(a),s=r(78),c=r(0),o=r(16),u=r(2),d=r(19),i=r.n(d),l=function(e){return{type:u.P,error:e}},p=function(){return function(){var e=Object(o.a)(n.a.mark((function e(t){var r,a,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.Q}),e.prev=1,e.next=4,i.a.get("/api/v1/orders/me");case 4:r=e.sent,a=Object.keys(r.data.orders).map((function(e){return Object(c.a)(Object(c.a)({},r.data.orders[e]),{},{orders:[].concat(Object(s.a)(r.data.orders[e].customOrders),Object(s.a)(r.data.orders[e].menuOrders)),customOrders:null,menuOrders:null})})),t((n=a,{type:u.R,orders:n})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),o=Object(c.a)({},e.t0).response,t(l(o));case 13:case"end":return e.stop()}var n}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){return{type:u.o,error:e}},f=function(e){return function(){var t=Object(o.a)(n.a.mark((function t(r){var a,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.p}),t.prev=1,t.next=4,i()({method:"POST",url:"/api/v1/orders",data:e});case 4:a=t.sent,r((n=a.data.orders,{type:u.q,orders:n})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),s=Object(c.a)({},t.t0).response,r(m(s));case 12:case"end":return t.stop()}var n}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},O=function(){return{type:u.f}},h=function(e){var t=e.order,r=e.totalOrders,a=e.pendingOrders,n=e.completedOrders,s=e.totalPrice;return{type:u.L,orders:t,totalOrders:r,pendingOrders:a,completedOrders:n,totalPrice:s}},b=function(e){return{type:u.J,error:e}},v=function(e){return function(){var t=Object(o.a)(n.a.mark((function t(r){var a,o,d,l,p,m,f,O,v;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.K}),t.prev=1,a=[],o="",t.next=6,i.a.get("/api/v1/orders");case 6:if(l=t.sent,"All Orders"===e){t.next=13;break}return o="?status=".concat(e),t.next=11,i.a.get("/api/v1/orders".concat(o));case 11:d=t.sent,Object.keys(d.data.orders).map((function(e){return a.push(Object(c.a)(Object(c.a)({},d.data.orders[e]),{},{orders:[].concat(Object(s.a)(l.data.orders[e].customOrders),Object(s.a)(l.data.orders[e].menuOrders)),customOrders:null,menuOrders:null})),a}));case 13:p=l.data.orders.length,m=0,f=0,O=0,Object.keys(l.data.orders).map((function(t){return"pending"===l.data.orders[t].status?f+=1:"delivered"===l.data.orders[t].status&&(O+=1),"cancelled"!==l.data.orders[t].status&&(m+=l.data.orders[t].price),"All Orders"===e?(a.push(Object(c.a)(Object(c.a)({},l.data.orders[t]),{},{orders:[].concat(Object(s.a)(l.data.orders[t].customOrders),Object(s.a)(l.data.orders[t].menuOrders)),customOrders:null,menuOrders:null})),a):""})),r(h({order:a,totalOrders:p,pendingOrders:f,completedOrders:O,totalPrice:m})),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(1),v=Object(c.a)({},t.t0).response,r(b(v));case 25:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return{type:u.Fb,response:e}},y=function(e){var t=e.status,r=e._id;return function(){var e=Object(o.a)(n.a.mark((function e(a){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i()({url:"/api/v1/orders/".concat(r),method:"PATCH",data:{status:t}});case 3:s=e.sent,a(g(s.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(g(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return{type:u.ab,order:e}},_=function(e){return function(){var t=Object(o.a)(n.a.mark((function t(r){var a,o,d;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.Z}),t.prev=1,t.next=4,i()({url:"/api/v1/orders/".concat(e),method:"get"});case 4:a=t.sent,d=[],a.data.order.customOrders.map((function(e){return d.push({_id:{ingredients:e.ingredients,title:e.name,foodType:e.foodType,_id:e._id,photo:e.photo,price:e.price},items:parseInt(e.items)}),d})),o=Object(c.a)(Object(c.a)({},a.data.order),{},{orders:[].concat(d,Object(s.a)(a.data.order.menuOrders)),customOrders:null,menuOrders:null}),r(j(o)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),r((n=t.t0.response.data,{type:u.ab,error:n}));case 14:case"end":return t.stop()}var n}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}},85:function(e,t,r){"use strict";var a=r(1),n=r.n(a),s=r(24);t.a=function(e){return n.a.createElement(s.b,{to:e.to?e.to:"#",className:"list__item ".concat(e.className),style:{listStyle:"none"}},e.children)}},90:function(e,t,r){"use strict";var a=r(1),n=r.n(a);t.a=function(e){return n.a.createElement("div",{className:"card__status ".concat(e.className)},n.a.createElement("h2",null,e.heading),n.a.createElement("p",null,e.value))}},97:function(e,t,r){"use strict";var a=r(5),n=r.n(a),s=r(16),c=r(0),o=r(12),u=r(13),d=r(15),i=r(14),l=r(1),p=r.n(l),m=r(85),f=function(e){var t="".concat(e.date).split("T"),r=new Date(e.date).getHours(),a=new Date(e.date).getMinutes(),n=new Date(e.date).getSeconds(),s="".concat(r,":").concat(a,":").concat(n);return t="".concat(t[0],"\n").concat(s),p.a.createElement(m.a,{className:"orders__list-item orders__list-item-".concat(e.status),to:e.to},p.a.createElement("p",{className:"orders__list-item-date"},t),p.a.createElement("h3",{className:"orders__list-item-name"},"#",e.id," (",e.results,")"),p.a.createElement("h2",{className:"orders__list-item-price"},"Rs ",e.price))},O=r(17),h=r(90),b=r(77),v=function(e){Object(d.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={formInput:{orders:"pending"}},e.onChangeHandler=function(t){var r=Object(b.b)(t,Object(c.a)({},e.state));e.setState(Object(c.a)({},r))},e.onFilterHandler=function(){e.props.getAllOrders(e.state.formInput.orders)},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getAllOrders(this.state.formInput.orders);case 2:this.props.user||this.props.history.push("/login");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.orders;return this.props.loading?p.a.createElement("div",{className:"u-flex-center dashboard__dashboard u-bg-white u-vh-100"},p.a.createElement(O.a,null)):this.props.orders?p.a.createElement("div",{className:"orders orders-status-".concat(this.props.showOrdersStatus," dashboard__dashboard")},p.a.createElement("h2",{className:"orders__heading heading-1 u-text-primary"},this.props.heading),this.props.showOrdersStatus&&p.a.createElement("h2",{className:"orders__price heading-2"},p.a.createElement("span",{className:"u-text-success u-ftwt-400"},"Total Amount:\xa0"),p.a.createElement("span",{className:"u-text-tertiary"},"Rs ",this.props.totalOrdersPrice.toFixed(2))),this.props.showOrdersStatus&&p.a.createElement("div",{className:"orders__status"},p.a.createElement(h.a,{className:"u-text-danger",heading:"total Orders",value:this.props.totalOrders}),p.a.createElement(h.a,{className:"u-text-grey-dark",heading:"Cancelled Orders",value:this.props.totalCancelledOrders}),p.a.createElement(h.a,{className:"u-text-success",heading:"Delivered orders",value:this.props.totalCompletedOrders}),p.a.createElement(h.a,{className:"u-text-danger",heading:"pending orders",value:this.props.totalPendingOrders})),this.props.showOrdersStatus&&p.a.createElement("div",{className:"form__group u-text-center orders__filter"},p.a.createElement("select",{name:"orders",id:"orders",className:"form__input u-mr-2",onChange:this.onChangeHandler,value:this.state.formInput.orders},p.a.createElement("option",{value:"pending"},"Pending Orders"),p.a.createElement("option",{value:"All Orders"},"All Orders"),p.a.createElement("option",{value:"delivered"},"Delivered Orders"),p.a.createElement("option",{value:"cancelled"},"Cancelled Orders")),p.a.createElement("button",{onClick:this.onFilterHandler,type:"submit",className:"btn__primary btn"},"Filter")),p.a.createElement("div",{className:"orders__list"},t.length>0?t.map((function(t){return p.a.createElement(f,{id:t._id,results:t.orders.length,price:t.price,date:t.createdAt,status:t.status,to:"".concat(e.props.match.url,"/").concat(t._id)})})):p.a.createElement("h4",{className:"orders__list--empty"},"There are no Orders Left"))):p.a.createElement("h4",{className:"u-text-success"},"You have no orders")}}]),r}(l.Component);t.a=v}}]);
//# sourceMappingURL=11.050c4923.chunk.js.map