(this["webpackJsonpburger-house"]=this["webpackJsonpburger-house"]||[]).push([[4],{115:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),s=n(16),c=n(12),i=n(13),o=n(15),u=n(14),p=n(0),l=n(1),d=n.n(l),m=n(6),f=n(95),h=n(94),b=n(81),g=n(84),v=n(18),y=n(77),_=n(31),O=n(87),j=n(76),w=function(e,t,n){var r,a={};return Object.keys(e).map((function(s){if(e[s]._id===t){r=e[s];var c={};e[s].ingredients.map((function(e){return c[e.name]=Object(p.a)({},e)})),Object.keys(n).map((function(e){return a[e]=Object(p.a)(Object(p.a)({},n[e]),{},{value:c[e]?c[e].amount:0}),a}))}return r})),{ingredients:a,burger:r}},E=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isLoading:!1,formInput:{title:"",price:""},photo:"",previewPhoto:"",showModal:!1,message:"",type:"",alert:{show:!1,status:"",message:""}},e.showAlertHandler=function(t,n){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{alert:{show:!0,status:n,message:t}}))},e.onCloseHandler=function(){e.closeAlertTimer=setTimeout((function(){e.setState(Object(p.a)(Object(p.a)({},e.state),{},{alert:{show:!1,status:"",message:""}}))}),2e3)},e.onChangeHandler=function(t){var n=Object(y.b)(t,Object(p.a)({},e.state));e.setState(Object(p.a)({},n))},e.changeFileHandler=function(t){e.setState({previewPhoto:URL.createObjectURL(t.target.files[0]),photo:t.target.files[0]})},e.uploadFileHandler=Object(s.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("photo",e.state.photo,e.state.photo.name),n.append("_id",e.props.match.params.id),t.next=5,e.props.updateBurger(n);case 5:case"end":return t.stop()}}),t)}))),e.resetIngredients=Object(s.a)(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=w(e.props.menu,e.props.match.params.id,e.props.ingredients),r=n.ingredients,t.next=3,e.props.setIngredients(r);case 3:case"end":return t.stop()}}),t)}))),e.updateBurgerIngredients=function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r={})._id=e.props.match.params.id,s=[],Object.keys(n).map((function(e){return s.push(Object(p.a)({},n[e]))})),r.ingredients=s,t.next=7,e.props.updateBurger(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateBurgerDetails=function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(r=new FormData).append("_id",e.props.match.params.id),r.append("title",e.state.formInput.title),r.append("price",e.state.formInput.price),t.next=7,e.props.updateBurger(r);case 7:"success"===e.props.updateBurgersStatus.status?("Updated Burger Successfully",e.showAlertHandler("Updated Burger Successfully","success"),e.updateTimer=setTimeout((function(){e.props.history.push("/dashboard/manage-menu")}),2e3)):e.showAlertHandler(e.props.deleteBurgerStatus.message,"fail");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModal=function(t,n){e.setState({showModal:!0,message:t,type:n})},e.closeModal=function(){e.setState({showModal:!1,message:"",type:""})},e.onDeleteHandler=function(){e.showModal("Are you sure you want to delete this burger ? ","delete")},e.onDeleteConfirmHandler=function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("delete"!==n){t.next=4;break}return t.next=3,e.props.deleteBurger(e.props.match.params.id);case 3:"success"===e.props.deleteBurgerStatus?e.props.history.push("/dashboard/manage-menu"):e.showAlertHandler(e.props.deleteBurgerStatus.message,"fail");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.timer=setTimeout(Object(s.a)(a.a.mark((function t(){var n,r,s,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.fetchIngredients();case 2:return n=w(e.props.menu,e.props.match.params.id,e.props.ingredients),r=n.ingredients,s=n.burger,c={title:s.title,price:s.price},t.next=6,e.props.setIngredients(r);case 6:e.setState({formInput:c,isLoading:!1,previewPhoto:s.photo});case 7:case"end":return t.stop()}}),t)}))),2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),clearTimeout(this.updateTimer)}},{key:"render",value:function(){var e=w(this.props.menu,this.props.match.params.id,this.props.menuIngs).burger,t=this.props.menuIngs;return this.state.isLoading?d.a.createElement("div",{className:"u-flex-center dashboard__dashboard u-bg-white u-vh-100"},d.a.createElement(v.a,null)):d.a.createElement(d.a.Fragment,null,this.state.alert.status&&d.a.createElement(j.a,{close:this.onCloseHandler(),show:this.state.alert.show,status:this.state.alert.status,message:this.state.alert.message}),d.a.createElement(O.a,{show:this.state.showModal,close:this.closeModal,message:this.state.message,edit:this.props.message,type:this.state.type,submit:this.onDeleteConfirmHandler}),d.a.createElement(_.a,{show:this.state.showModal,close:this.closeModal}),d.a.createElement("div",{className:"dashboard__dashboard update-menu__detail"},d.a.createElement("h2",{className:"heading-1 update-menu__detail-heading"},"Update ",e.title," Recipe"),d.a.createElement("div",{className:"update-menu__detail-image-bg"},d.a.createElement("img",{src:this.state.previewPhoto,className:"update-menu__detail-image-bg-image",alt:e.title}),d.a.createElement("input",{type:"file",onChange:this.changeFileHandler,style:{display:"none"},id:"photo",name:"photo"}),d.a.createElement("label",{className:"btn btn__tertiary-goTo btn-sm",htmlFor:"photo"},"Choose an Image"),d.a.createElement("button",{onClick:this.uploadFileHandler,className:"btn btn__success"},"Upload")),d.a.createElement("form",{className:"update-menu__detail-form",autoComplete:"off",onSubmit:this.updateBurgerDetails},d.a.createElement(b.a,{inputtype:"input",type:"text",name:"title",label:"name of ingredient",value:this.state.formInput.title,onChange:this.onChangeHandler}),d.a.createElement(b.a,{inputtype:"input",type:"number",name:"price",label:"price",onChange:this.onChangeHandler,value:this.state.formInput.price}),d.a.createElement(b.a,{inputtype:"submit",value:"save details",variant:"tertiary"})),d.a.createElement("div",{className:"custom-burger"},d.a.createElement(h.a,{ingredients:t}),d.a.createElement("div",{className:"controls"},d.a.createElement(f.a,{ingredients:t,NotfoodType:"".concat(e.foodType).startsWith("v")?"non-vegetarian":"vegetarian",foodType:e.foodType,hidePrice:!0,totalBurgerPrice:e.price,success:this.updateBurgerIngredients,danger:this.resetIngredients,successField:"Save Ingredients",dangerField:"Reset Ingredients",addIngredient:this.props.addIngredient,removeIngredient:this.props.removeIngredient,successBtnType:"submit"}))),d.a.createElement("div",{className:"delete__burger"},d.a.createElement("h4",{className:"heading-2 delete__burger-heading"},"Delete this Burger"),d.a.createElement("button",{className:"btn btn__danger--outline",onClick:this.onDeleteHandler},"Delete"))))}}]),n}(l.Component);t.default=Object(m.b)((function(e){return{ingredients:e.menu.ingredients,menu:e.menu.Burgers,menuIngs:e.menu.menuIngs,updateBurgersStatus:e.menu.updateBurgersStatus,deleteBurgerStatus:e.menu.deleteBurgerStatus}}),(function(e){return{fetchIngredients:function(){return e(g.d())},addIngredient:function(t){return e(g.a(t))},removeIngredient:function(t){return e(g.f(t))},setIngredients:function(t){return e(g.g(t))},updateBurger:function(t){return e(g.h(t))},deleteBurger:function(t){return e(g.c(t))}}}))(E)},76:function(e,t,n){"use strict";var r=n(1),a=n.n(r);t.a=function(e){return a.a.createElement("div",{className:"alert alert__".concat(e.show," alert--").concat(e.status," ").concat(e.className)},e.message)}},77:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(8),a=n(0),s=function(e,t){return Object(a.a)(Object(a.a)({},t),{},{formInput:Object(a.a)(Object(a.a)({},t.formInput),{},Object(r.a)({},e.target.name,e.target.value))})},c=function(e){var t=Object(a.a)({},e.formInput),n={};return Object.keys(t).map((function(e){return n[e]=""})),n}},78:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return a}))},79:function(e,t,n){(function(t){var n=t&&t.pid?t.pid.toString(36):"";function r(){var e=Date.now(),t=r.last||e;return r.last=e>t?e:t+1}e.exports=e.exports.default=function(e,t){return(e||"")+""+n+r().toString(36)+(t||"")},e.exports.process=function(e,t){return(e||"")+n+r().toString(36)+(t||"")},e.exports.time=function(e,t){return(e||"")+r().toString(36)+(t||"")}}).call(this,n(46))},81:function(e,t,n){"use strict";var r=n(1),a=n.n(r);t.a=function(e){if("input"===e.inputtype){var t=!1!==e.required;return a.a.createElement("div",{className:"form__group "},a.a.createElement("label",{className:"form__label"},e.label),a.a.createElement("input",{type:e.type,name:e.name,id:e.name,placeholder:e.placeholder,className:"form__".concat(e.inputtype," ").concat(e.className),onChange:e.onChange,minLength:e.minLength,value:e.value,required:t}))}if("submit"===e.inputtype){var n=a.a.createElement("input",Object.assign({type:"submit",value:e.value,className:"btn btn__".concat(e.variant," ").concat(e.className)},e));return a.a.createElement("div",{className:"form__group ".concat(e.formGroupClass)},n)}}},82:function(e,t,n){"use strict";var r=n(1),a=n.n(r);t.a=function(e){var t,n=!1;return 0===e.items&&(n=!0,t="btn btn__primary-disabled"),a.a.createElement("div",{className:"btn__addOrRemove ".concat(e.className)},a.a.createElement("button",{type:"button",onClick:e.addItem,className:e.classes},"+"),a.a.createElement("p",{className:"u-text-tertiary ".concat(e.valueClass)},e.items),a.a.createElement("button",{type:"button",onClick:e.removeItem,disabled:n,className:t||e.classes},"-"))}},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return f}));var r=n(5),a=n.n(r),s=n(0),c=n(16),i=n(2),o=n(19),u=n.n(o),p=function(e){return{type:i.b,name:e}},l=function(e){return{type:i.mb,name:e}},d=function(e){return{type:i.g,ingredients:e}},m=function(){return{type:i.h}},f=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get("/api/v1/ingredients");case 3:n=e.sent,console.log(n),t((a=n.data.ingredients,{type:i.I,ingredients:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t((r=Object(s.a)({},e.t0).response.data,{type:i.G,error:r}));case 11:case"end":return e.stop()}var r,a}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},84:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y}));var r=n(5),a=n.n(r),s=n(0),c=n(16),i=n(2),o=n(19),u=n.n(o),p=n(83),l=function(e){return{type:i.F,burgers:e}},d=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:i.H}),e.prev=1,e.next=4,u.a.get("/api/v1/ingredients");case 4:n=e.sent,t((a=n.data.ingredients,{type:i.I,ingredients:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t((r=Object(s.a)({},e.t0).response.data,{type:i.G,error:r}));case 11:case"end":return e.stop()}var r,a}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:i.E}),e.prev=1,e.next=4,u.a.get("/api/v1/burgers");case 4:n=e.sent,r=n.data.burgers,t(l(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),c=Object(s.a)({},e.t0).response?Object(s.a)({},e.t0).response:e.t0,t((a=c,{type:i.D,error:a}));case 13:case"end":return e.stop()}var a}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return{type:i.zb,name:e}},h=function(e){return{type:i.Ab,name:e}},b=function(e){return{type:i.nb,ings:e}},g=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._id?e._id:e.get("_id"),t.prev=1,t.next=4,u()({url:"/api/v1/burgers/".concat(r),data:e,method:"PATCH"});case 4:c=t.sent,n((o=c.data,{type:i.pb,status:o})),n(m()),n(Object(p.d)()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n((a=Object(s.a)({},t.t0.response.data),{type:i.ob,error:a}));case 13:case"end":return t.stop()}var a,o}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u()({url:"/api/v1/burgers",data:e,method:"POST"});case 3:r=t.sent,n((c=r.data,{type:i.k,status:c})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n((a=Object(s.a)({},t.t0.response.data),{type:i.i,error:a}));case 10:case"end":return t.stop()}var a,c}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.t}),t.next=4,u()({url:"/api/v1/burgers/".concat(e),method:"delete"});case 4:r=t.sent,n((c=r.data,{type:i.u,response:c})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n((a=Object(s.a)({},t.t0.response.data),{type:i.s,error:a}));case 11:case"end":return t.stop()}var a,c}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},87:function(e,t,n){"use strict";var r=n(12),a=n(13),s=n(15),c=n(14),i=n(1),o=n.n(i),u=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"modal modal__".concat(this.props.show," ").concat(this.props.className)},this.props.children)}}]),n}(i.Component),p=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).onSubmitHandler=function(){e.props.submit(e.props.type),e.props.close()},e}return Object(a.a)(n,[{key:"render",value:function(){return o.a.createElement(u,{className:"confirm__modal",show:this.props.show},o.a.createElement("h4",{className:"confirm__modal-message"},this.props.message),o.a.createElement("button",{onClick:this.onSubmitHandler,className:"btn btn__success confirm__modal-btn-success"},"Yes"),o.a.createElement("button",{onClick:this.props.close,className:"btn btn__danger confirm__modal-btn-danger"},"No"))}}]),n}(i.Component);t.a=p},94:function(e,t,n){"use strict";var r=n(78),a=n(12),s=n(13),c=n(15),i=n(14),o=n(1),u=n.n(o),p=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e;switch(this.props.ingredient){case"breadTop":e=u.a.createElement("div",{className:"bread-top"});break;case"breadBottom":e=u.a.createElement("div",{className:"bread-bottom"});break;case"chicken":e=u.a.createElement("div",{className:"chicken"});break;case"aloo":e=u.a.createElement("div",{className:"aloo"});break;case"lettuce":e=u.a.createElement("div",{className:"lettuce"});break;case"paneer":e=u.a.createElement("div",{className:"paneer"});break;case"cheese":e=u.a.createElement("div",{className:"cheese"});break;case"tomatoes":e=u.a.createElement("div",{className:"tomatoes"});break;default:e=null}return e}}]),n}(o.Component),l=n(79),d=n.n(l),m=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=null;return this.props.ingredients&&(t=Object.keys(this.props.ingredients).map((function(t){return Object(r.a)(Array(e.props.ingredients[t].value)).map((function(){return u.a.createElement(p,{key:d()(),ingredient:t})}))}))),u.a.createElement("div",{className:"burger"},u.a.createElement(p,{ingredient:"breadTop"}),t,u.a.createElement(p,{ingredient:"breadBottom"}))}}]),n}(o.Component);t.a=m},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(12),a=n(13),s=n(15),c=n(14),i=n(1),o=n.n(i),u=n(82),p=function(e){return o.a.createElement("div",{className:"controls__ingredient"},o.a.createElement("img",{src:e.photo,alt:"ingredient",className:"controls__ingredient-img"}),o.a.createElement("p",{className:"controls__ingredient-name"},e.name),o.a.createElement(u.a,{addItem:e.addIng,removeItem:e.removeIng,items:parseInt(e.items),classes:"btn btn__primary btn__primary-round",valueClass:"u-fontSize-2rem"}))},l=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e,t=this,n={},r=!0,a=this.props.hidePrice?{display:"none"}:null;return e=this.props.ingredients?Object.keys(this.props.ingredients).filter((function(e){return t.props.ingredients[e].foodType!==t.props.NotfoodType})).map((function(e){return t.props.ingredients[e].value>0&&(r=!1,n[e]={name:e,_id:t.props.ingredients[e]._id,amount:t.props.ingredients[e].value}),o.a.createElement(p,{name:e,key:e,items:t.props.ingredients[e].value,photo:t.props.ingredients[e].photo,addIng:function(){return t.props.addIngredient(e)},removeIng:function(){return t.props.removeIngredient(e)}})})):"",o.a.createElement("div",{className:"controls__ingredients ".concat(this.props.className)},o.a.createElement("p",{className:"controls__price",style:a},"Total Price:\xa0",o.a.createElement("span",{className:"controls__price-value"},"Rs\xa0",this.props.totalBurgerPrice)),e,o.a.createElement("button",{type:"button",onClick:this.props.danger,className:"btn btn__danger--outline"}," ",this.props.dangerField," "),o.a.createElement("button",{type:this.props.successBtnType?this.props.successBtnType:"button",onClick:function(){return t.props.success(n,t.props.foodType)},disabled:r,className:"btn btn__success".concat(!0===r?"--outline-disabled":"--outline")},this.props.successField))}}]),n}(i.Component)}}]);
//# sourceMappingURL=4.6a7e4102.chunk.js.map