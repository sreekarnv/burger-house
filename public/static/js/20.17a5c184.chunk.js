(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[20],{111:function(t,e,a){"use strict";a.r(e);var n=a(4),r=a.n(n),s=a(7),o=a(0),i=a(13),u=a(14),c=a(16),l=a(15),p=a(1),h=a.n(p),m=a(8),f=a(27),d=a(19),g=a(32),b=a(79),v=a(96),w=function(t){Object(c.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(t=e.call.apply(e,[this].concat(u))).state={formInput:{name:"",email:"",password:"",passwordConfirm:"",location:{coordinates:null}},showAlert:!1},t.onChangeHandler=function(e){var a=Object(g.b)(e,Object(o.a)({},t.state));t.setState(Object(o.a)({},a))},t.onSubmitHandler=function(){var e=Object(s.a)(r.a.mark((function e(a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t.props.registerUser(t.state.formInput);case 3:n=Object(g.a)(t.state),t.setState({formInput:n,showAlert:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onCloseHandler=function(){t.closeAlertTimer=setTimeout((function(){t.setState({showAlert:!1}),"success"===t.props.registerStatus.data.status&&t.props.history.replace("/confirm-email-message")}),2e3)},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){console.log(e),t.setState({formInput:Object(o.a)(Object(o.a)({},t.state.formInput),{},{location:{coordinates:[e.coords.longitude,e.coords.latitude]}})})}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.closeAlertTimer)}},{key:"render",value:function(){return h.a.createElement(v.a,null,this.state.showAlert&&this.props.registerStatus&&h.a.createElement(b.a,{show:this.state.showAlert,status:"success"===this.props.registerStatus?this.props.registerStatus:this.props.registerStatus.data.status,message:"success"===this.props.registerStatus.data.status?"User Created Successfully":this.props.registerStatus.data.message,close:this.onCloseHandler()}),h.a.createElement("section",{className:"register"},h.a.createElement("form",{className:"register__form",onSubmit:this.onSubmitHandler,autoComplete:"off"},h.a.createElement("div",{className:"form__group"},h.a.createElement("h2",{className:"heading-1 u-text-primary u-ftwt-400"},"Create an Account")),h.a.createElement(f.a,{name:"name",inputtype:"input",type:"text",label:"Name",onChange:this.onChangeHandler,value:this.state.formInput.name}),h.a.createElement(f.a,{name:"email",inputtype:"input",type:"email",label:"Email",onChange:this.onChangeHandler,value:this.state.formInput.email}),h.a.createElement(f.a,{name:"password",inputtype:"input",type:"password",label:"Password",onChange:this.onChangeHandler,value:this.state.formInput.password,minLength:6}),h.a.createElement(f.a,{name:"passwordConfirm",inputtype:"input",type:"password",label:"Password Confirm",onChange:this.onChangeHandler,value:this.state.formInput.passwordConfirm,minLength:6}),h.a.createElement(f.a,{inputtype:"submit",value:this.props.registerInit?"Loading....":"Register",variant:"tertiary"}))))}}]),a}(p.Component);e.default=Object(m.b)((function(t){return{registerInit:t.auth.registerInit,registerStatus:t.auth.registerStatus,user:t.auth.user}}),(function(t){return{registerUser:function(e){return t(d.e(e))}}}))(w)},79:function(t,e,a){"use strict";var n=a(1),r=a.n(n);e.a=function(t){return r.a.createElement("div",{className:"alert alert__".concat(t.show," alert--").concat(t.status," ").concat(t.className)},t.message)}},96:function(t,e,a){"use strict";var n=a(4),r=a.n(n),s=a(7),o=a(13),i=a(14),u=a(16),c=a(15),l=a(1),p=a.n(l),h=a(8),m=a(19),f=a(5),d=a(20),g=function(t){Object(u.a)(a,t);var e=Object(c.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.checkAuthState();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.user?this.props.checkAuthInit?p.a.createElement("div",{className:"u-flex-center u-vh-100 u-bg-white"},p.a.createElement(d.a,null)):this.props.user&&"admin"===this.props.user.role?p.a.createElement(f.a,{to:"/dashboard/manage-orders"}):!this.props.user||this.props.user.role&&"admin"===this.props.user.role?void 0:p.a.createElement(f.a,{to:"/menu"}):this.props.children}}]),a}(l.Component);e.a=Object(h.b)((function(t){return{user:t.auth.user,checkAuthInit:t.auth.checkAuthInit}}),(function(t){return{checkAuthState:function(){return t(m.a())}}}))(g)}}]);
//# sourceMappingURL=20.17a5c184.chunk.js.map