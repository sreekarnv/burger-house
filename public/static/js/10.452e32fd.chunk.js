(this["webpackJsonpburger-house"]=this["webpackJsonpburger-house"]||[]).push([[10],{113:function(e,t,r){"use strict";r.r(t);var n=r(14),a=r(15),s=r(17),c=r(16),o=r(1),u=r.n(o),i=r(13),d=r(98),l=r(81),p=r(79),m=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){return u.a.createElement(p.a,null,u.a.createElement(d.a,Object.assign({orders:this.props.userOrders,loading:this.props.userOrdersInit,getAllOrders:this.props.getAllUserOrders,heading:"My Orders",showOrdersStatus:!1},this.props)))}}]),r}(o.Component);t.default=Object(i.b)((function(e){return{userOrdersInit:e.orders.getUserOrdersInit,userOrders:e.orders.userOrders,user:e.auth.user}}),(function(e){return{getAllUserOrders:function(){return e(l.d())}}}))(m)},77:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(t,"a",(function(){return a}))},78:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return c}));var n=r(8),a=r(0),s=function(e,t){return Object(a.a)(Object(a.a)({},t),{},{formInput:Object(a.a)(Object(a.a)({},t.formInput),{},Object(n.a)({},e.target.name,e.target.value))})},c=function(e){var t=Object(a.a)({},e.formInput),r={};return Object.keys(t).map((function(e){return r[e]=""})),r}},79:function(e,t,r){"use strict";var n=r(5),a=r.n(n),s=r(12),c=r(14),o=r(15),u=r(17),i=r(16),d=r(1),l=r.n(d),p=r(13),m=r(23),f=r(4),h=function(e){Object(u.a)(r,e);var t=Object(i.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.checkAuthState();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.user?this.props.children:l.a.createElement(f.a,{to:"/login"})}}]),r}(d.Component);t.a=Object(p.b)((function(e){return{user:e.auth.user,checkAuthInit:e.auth.checkAuthInit}}),(function(e){return{checkAuthState:function(){return e(m.a())}}}))(h)},81:function(e,t,r){"use strict";r.d(t,"d",(function(){return p})),r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return h})),r.d(t,"c",(function(){return v})),r.d(t,"f",(function(){return y})),r.d(t,"e",(function(){return _}));var n=r(5),a=r.n(n),s=r(77),c=r(0),o=r(12),u=r(2),i=r(18),d=r.n(i),l=function(e){return{type:u.O,error:e}},p=function(){return function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:u.P}),e.prev=1,e.next=4,d.a.get("/api/v1/orders/me");case 4:r=e.sent,n=Object.keys(r.data.orders).map((function(e){return Object(c.a)(Object(c.a)({},r.data.orders[e]),{},{orders:[].concat(Object(s.a)(r.data.orders[e].customOrders),Object(s.a)(r.data.orders[e].menuOrders)),customOrders:null,menuOrders:null})})),t((a=n,{type:u.Q,orders:a})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),o=Object(c.a)({},e.t0).response,t(l(o));case 13:case"end":return e.stop()}var a}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){return{type:u.o,error:e}},f=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(r){var n,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.p}),t.prev=1,t.next=4,d()({method:"POST",url:"/api/v1/orders",data:e});case 4:n=t.sent,r((a=n.data.orders,{type:u.q,orders:a})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),s=Object(c.a)({},t.t0).response,r(m(s));case 12:case"end":return t.stop()}var a}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},h=function(){return{type:u.f}},O=function(e){var t=e.order,r=e.totalOrders,n=e.pendingOrders,a=e.completedOrders,s=e.totalPrice;return{type:u.K,orders:t,totalOrders:r,pendingOrders:n,completedOrders:a,totalPrice:s}},b=function(e){return{type:u.I,error:e}},v=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(r){var n,o,i,l,p,m,f,h,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.J}),t.prev=1,n=[],o="",t.next=6,d.a.get("/api/v1/orders");case 6:if(l=t.sent,"All Orders"===e){t.next=13;break}return o="?status=".concat(e),t.next=11,d.a.get("/api/v1/orders".concat(o));case 11:i=t.sent,Object.keys(i.data.orders).map((function(e){return n.push(Object(c.a)(Object(c.a)({},i.data.orders[e]),{},{orders:[].concat(Object(s.a)(l.data.orders[e].customOrders),Object(s.a)(l.data.orders[e].menuOrders)),customOrders:null,menuOrders:null})),n}));case 13:p=l.data.orders.length,m=0,f=0,h=0,Object.keys(l.data.orders).map((function(t){return"pending"===l.data.orders[t].status?f+=1:"delivered"===l.data.orders[t].status&&(h+=1),"cancelled"!==l.data.orders[t].status&&(m+=l.data.orders[t].price),"All Orders"===e?(n.push(Object(c.a)(Object(c.a)({},l.data.orders[t]),{},{orders:[].concat(Object(s.a)(l.data.orders[t].customOrders),Object(s.a)(l.data.orders[t].menuOrders)),customOrders:null,menuOrders:null})),n):""})),r(O({order:n,totalOrders:p,pendingOrders:f,completedOrders:h,totalPrice:m})),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(1),v=Object(c.a)({},t.t0).response,r(b(v));case 25:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return{type:u.Eb,response:e}},y=function(e){var t=e.status,r=e._id;return function(){var e=Object(o.a)(a.a.mark((function e(n){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({url:"/api/v1/orders/".concat(r),method:"PATCH",data:{status:t}});case 3:s=e.sent,n(g(s.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(g(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return{type:u.Z,order:e}},_=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(r){var n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:u.Y}),t.prev=1,t.next=4,d()({url:"/api/v1/orders/".concat(e),method:"get"});case 4:n=t.sent,i=[],n.data.order.customOrders.map((function(e){return i.push({_id:{ingredients:e.ingredients,title:e.name,foodType:e.foodType,_id:e._id,photo:e.photo,price:e.price},items:parseInt(e.items)}),i})),o=Object(c.a)(Object(c.a)({},n.data.order),{},{orders:[].concat(i,Object(s.a)(n.data.order.menuOrders)),customOrders:null,menuOrders:null}),r(j(o)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),r((a=t.t0.response.data,{type:u.Z,error:a}));case 14:case"end":return t.stop()}var a}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}},87:function(e,t,r){"use strict";var n=r(1),a=r.n(n),s=r(24);t.a=function(e){return a.a.createElement(s.b,{to:e.to?e.to:"#",className:"list__item ".concat(e.className),style:{listStyle:"none"}},e.children)}},90:function(e,t,r){"use strict";var n=r(1),a=r.n(n);t.a=function(e){return a.a.createElement("div",{className:"card__status ".concat(e.className)},a.a.createElement("h2",null,e.heading),a.a.createElement("p",null,e.value))}},98:function(e,t,r){"use strict";var n=r(5),a=r.n(n),s=r(12),c=r(0),o=r(14),u=r(15),i=r(17),d=r(16),l=r(1),p=r.n(l),m=r(87),f=function(e){var t="".concat(e.date).split("T"),r=new Date(e.date).getHours(),n=new Date(e.date).getMinutes(),a=new Date(e.date).getSeconds(),s="".concat(r,":").concat(n,":").concat(a);return t="".concat(t[0],"\n").concat(s),p.a.createElement(m.a,{className:"orders__list-item orders__list-item-".concat(e.status),to:e.to},p.a.createElement("p",{className:"orders__list-item-date"},t),p.a.createElement("h3",{className:"orders__list-item-name"},"#",e.id," (",e.results,")"),p.a.createElement("h2",{className:"orders__list-item-price"},"Rs ",e.price))},h=r(20),O=r(90),b=r(78),v=function(e){Object(i.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={formInput:{orders:"pending"}},e.onChangeHandler=function(t){var r=Object(b.b)(t,Object(c.a)({},e.state));e.setState(Object(c.a)({},r))},e.onFilterHandler=function(){e.props.getAllOrders(e.state.formInput.orders)},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getAllOrders(this.state.formInput.orders);case 2:this.props.user||this.props.history.push("/login");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.orders;return this.props.loading?p.a.createElement("div",{className:"u-flex-center dashboard__dashboard u-bg-white u-vh-100"},p.a.createElement(h.a,null)):this.props.orders?p.a.createElement("div",{className:"orders orders-status-".concat(this.props.showOrdersStatus," dashboard__dashboard")},p.a.createElement("h2",{className:"orders__heading heading-1 u-text-primary"},this.props.heading),this.props.showOrdersStatus&&p.a.createElement("h2",{className:"orders__price heading-2"},p.a.createElement("span",{className:"u-text-success u-ftwt-400"},"Total Amount:\xa0"),p.a.createElement("span",{className:"u-text-tertiary"},"Rs ",this.props.totalOrdersPrice.toFixed(2))),this.props.showOrdersStatus&&p.a.createElement("div",{className:"orders__status"},p.a.createElement(O.a,{className:"u-text-danger",heading:"total Orders",value:this.props.totalOrders}),p.a.createElement(O.a,{className:"u-text-grey-dark",heading:"Cancelled Orders",value:this.props.totalCancelledOrders}),p.a.createElement(O.a,{className:"u-text-success",heading:"Delivered orders",value:this.props.totalCompletedOrders}),p.a.createElement(O.a,{className:"u-text-danger",heading:"pending orders",value:this.props.totalPendingOrders})),this.props.showOrdersStatus&&p.a.createElement("div",{className:"form__group u-text-center orders__filter"},p.a.createElement("select",{name:"orders",id:"orders",className:"form__input u-mr-2",onChange:this.onChangeHandler,value:this.state.formInput.orders},p.a.createElement("option",{value:"pending"},"Pending Orders"),p.a.createElement("option",{value:"All Orders"},"All Orders"),p.a.createElement("option",{value:"delivered"},"Delivered Orders"),p.a.createElement("option",{value:"cancelled"},"Cancelled Orders")),p.a.createElement("button",{onClick:this.onFilterHandler,type:"submit",className:"btn__primary btn"},"Filter")),p.a.createElement("div",{className:"orders__list"},t.length>0?t.map((function(t){return p.a.createElement(f,{id:t._id,results:t.orders.length,price:t.price,date:t.createdAt,status:t.status,to:"".concat(e.props.match.url,"/").concat(t._id)})})):p.a.createElement("h4",{className:"orders__list--empty"},"There are no Orders Left"))):p.a.createElement("h4",{className:"u-text-success"},"You have no orders")}}]),r}(l.Component);t.a=v}}]);
//# sourceMappingURL=10.452e32fd.chunk.js.map